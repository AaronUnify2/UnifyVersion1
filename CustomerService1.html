<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SDRC Customer Service Call Flow Chart</title>
    <!-- dom-to-image library for proper SVG/foreignObject rendering -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.min.js"></script>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ 
            startOnLoad: false,
            theme: 'default',
            flowchart: {
                useMaxWidth: false,
                htmlLabels: true,
                curve: 'basis',
                nodeSpacing: 80,
                rankSpacing: 120,
                padding: 25
            },
            themeVariables: {
                fontSize: '32px',
                fontFamily: 'Arial, sans-serif'
            }
        });
        
        // Render manually so we can post-process
        await mermaid.run();
        
        // === FONT SIZE OVERRIDE ===
        // Mermaid's themeVariables.fontSize doesn't affect HTML inside foreignObject.
        // We must inject a <style> directly INTO the SVG element.
        const svg = document.querySelector('#mermaidDiagram svg');
        if (svg) {
            // 1. Inject stylesheet inside SVG (this is the only way to style foreignObject HTML)
            const styleEl = document.createElementNS('http://www.w3.org/2000/svg', 'style');
            styleEl.textContent = `
                foreignObject div,
                foreignObject span,
                foreignObject p,
                foreignObject b,
                foreignObject i,
                foreignObject u,
                .nodeLabel,
                .nodeLabel * {
                    font-size: 26px !important;
                    line-height: 1.35 !important;
                    font-family: Arial, sans-serif !important;
                }
                .edgeLabel foreignObject div,
                .edgeLabel foreignObject span,
                .edgeLabel .nodeLabel,
                .edgeLabel .nodeLabel * {
                    font-size: 22px !important;
                    font-weight: 700 !important;
                }
            `;
            svg.insertBefore(styleEl, svg.firstChild);
            
            // 2. Resize all foreignObject elements to fit their now-larger content
            //    Without this, text overflows the original small boxes
            svg.querySelectorAll('foreignObject').forEach(fo => {
                const div = fo.querySelector('div');
                if (div) {
                    // Force a reflow to get actual content size at new font
                    const rect = div.getBoundingClientRect();
                    const newW = Math.ceil(rect.width) + 20;
                    const newH = Math.ceil(rect.height) + 20;
                    fo.setAttribute('width', newW);
                    fo.setAttribute('height', newH);
                }
            });
            
            // 3. Also scale up any raw SVG <text> elements (diamond labels etc)
            svg.querySelectorAll('text').forEach(el => {
                el.style.fontSize = '26px';
            });
            
            // 4. Update SVG viewBox to encompass the now-larger diagram
            const bbox = svg.getBBox();
            svg.setAttribute('viewBox', `${bbox.x - 20} ${bbox.y - 20} ${bbox.width + 40} ${bbox.height + 40}`);
            svg.setAttribute('width', bbox.width + 40);
            svg.setAttribute('height', bbox.height + 40);
            
            console.log('Font override complete. SVG size:', bbox.width + 40, 'x', bbox.height + 40);
        }
    </script>
    <style>
        @page {
            size: A3 landscape;
            margin: 10mm;
        }
        
        * { box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f4f8;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            border-radius: 12px;
        }
        
        h1 {
            color: #1a365d;
            text-align: center;
            margin-bottom: 5px;
            font-size: 28px;
        }
        
        h3 { color: #1a365d; margin-top: 0; }
        
        .subtitle {
            text-align: center;
            color: #4a5568;
            margin-bottom: 20px;
            font-size: 14px;
        }
        
        /* Controls */
        .controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .controls button {
            padding: 10px 20px;
            font-size: 14px;
            cursor: pointer;
            border: 2px solid #3182ce;
            background-color: white;
            color: #3182ce;
            border-radius: 6px;
            transition: all 0.2s;
            font-weight: 600;
        }
        
        .controls button:hover { background-color: #3182ce; color: white; }
        .controls button:disabled { opacity: 0.6; cursor: not-allowed; }
        .controls button.print-btn { border-color: #38a169; color: #38a169; }
        .controls button.print-btn:hover { background-color: #38a169; color: white; }
        .controls button.poster-btn { border-color: #805ad5; color: #805ad5; }
        .controls button.poster-btn:hover { background-color: #805ad5; color: white; }
        .controls button.strip-btn { border-color: #dd6b20; color: #dd6b20; }
        .controls button.strip-btn:hover { background-color: #dd6b20; color: white; }
        
        .zoom-info {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            background-color: #ebf8ff;
            border-radius: 6px;
            color: #2b6cb0;
            font-weight: 500;
        }
        
        /* Poster Size Selector */
        .poster-options {
            display: none;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            padding: 15px;
            background-color: #f3e8ff;
            border-radius: 8px;
            border: 2px solid #805ad5;
            flex-wrap: wrap;
            align-items: center;
        }
        .poster-options.show { display: flex; }
        .poster-options label { font-weight: 600; color: #553c9a; }
        .poster-options select {
            padding: 8px 12px; font-size: 14px;
            border: 2px solid #805ad5; border-radius: 6px;
            background-color: white; color: #553c9a; cursor: pointer;
        }
        .poster-options button {
            padding: 10px 20px; font-size: 14px; cursor: pointer;
            border: 2px solid #805ad5; background-color: #805ad5;
            color: white; border-radius: 6px; font-weight: 600;
        }
        .poster-options button:hover { background-color: #6b46c1; }
        .poster-options button.cancel-btn { background-color: white; color: #805ad5; }
        .poster-options button.cancel-btn:hover { background-color: #f3e8ff; }
        .poster-status { color: #553c9a; font-size: 14px; min-width: 200px; }
        
        /* Wall poster panel */
        .wall-options {
            display: none;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 20px;
            padding: 20px;
            background-color: #feebc8;
            border-radius: 8px;
            border: 2px solid #dd6b20;
            align-items: center;
        }
        .wall-options.show { display: flex; }
        .wall-options .wall-row {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
            justify-content: center;
        }
        .wall-options label { font-weight: 600; color: #c05621; }
        .wall-options input[type="number"] {
            width: 70px; padding: 8px; font-size: 14px;
            border: 2px solid #dd6b20; border-radius: 6px;
            text-align: center; color: #c05621;
        }
        .wall-options select {
            padding: 8px 12px; font-size: 14px;
            border: 2px solid #dd6b20; border-radius: 6px;
            background-color: white; color: #c05621; cursor: pointer;
        }
        .wall-options .wall-info {
            font-size: 13px;
            color: #744210;
            text-align: center;
            max-width: 600px;
            line-height: 1.5;
        }
        .wall-options button {
            padding: 10px 20px; font-size: 14px; cursor: pointer;
            border: 2px solid #dd6b20; background-color: #dd6b20;
            color: white; border-radius: 6px; font-weight: 600;
        }
        .wall-options button:hover { background-color: #c05621; }
        .wall-options button.cancel-btn { background-color: white; color: #dd6b20; }
        .wall-options button.cancel-btn:hover { background-color: #feebc8; }
        .wall-options .wall-preview {
            display: inline-grid;
            gap: 3px;
            padding: 10px;
            background: white;
            border-radius: 6px;
            border: 1px solid #ed8936;
        }
        .wall-options .wall-preview .page-box {
            width: 45px;
            height: 32px;
            border: 2px solid #dd6b20;
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 700;
            color: #c05621;
            background: #fffaf0;
        }
        .wall-options .wall-status {
            color: #c05621;
            font-size: 14px;
            font-weight: 500;
        }
        
        /* General status bar */
        .status-bar {
            display: none;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            padding: 15px;
            background-color: #e2e8f0;
            border-radius: 8px;
            border: 2px solid #718096;
            align-items: center;
            color: #4a5568;
            font-weight: 500;
        }
        .status-bar.show { display: flex; }
        
        /* Diagram Container */
        .diagram-wrapper {
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            overflow: hidden;
            background-color: #fafafa;
            margin-bottom: 30px;
        }
        .diagram-container {
            width: 100%;
            height: 75vh;
            min-height: 600px;
            overflow: auto;
            padding: 20px;
            cursor: grab;
        }
        .diagram-container:active { cursor: grabbing; }
        .mermaid {
            transform-origin: top left;
            transition: transform 0.2s ease;
        }
        
        /* Info Box Styles */
        .info-section { margin-top: 30px; }
        .info-box {
            background: linear-gradient(135deg, #ebf8ff 0%, #e6fffa 100%);
            border-left: 5px solid #3182ce;
            padding: 20px 25px;
            margin-bottom: 20px;
            border-radius: 0 8px 8px 0;
        }
        .info-box h3 { margin-top: 0; color: #2c5282; font-size: 18px; margin-bottom: 12px; }
        .info-box p { margin: 8px 0; font-size: 14px; color: #2d3748; line-height: 1.6; }
        
        .instructions {
            background-color: #fffaf0;
            border: 1px solid #ed8936;
            border-radius: 8px;
            padding: 15px 20px;
            margin-bottom: 20px;
        }
        .instructions h4 { margin: 0 0 10px 0; color: #c05621; font-size: 14px; }
        .instructions ul { margin: 0; padding-left: 20px; font-size: 13px; color: #744210; }
        .instructions li { margin-bottom: 5px; }
        
        .mermaid .node rect { rx: 8px; ry: 8px; }
        
        .footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #e2e8f0;
            color: #718096;
            font-size: 12px;
        }
        
        /* ======== A3 PRINT STYLES ======== */
        @media print {
            * {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
                color-adjust: exact !important;
            }
            html, body {
                width: 420mm; height: 297mm;
                margin: 0 !important; padding: 0 !important;
                background-color: white !important;
                overflow: visible !important;
            }
            body { padding: 5mm !important; }
            .container {
                box-shadow: none !important; padding: 5mm !important;
                margin: 0 !important; max-width: none !important;
                width: 100% !important; border-radius: 0 !important;
                page-break-inside: avoid;
            }
            .controls, .instructions, .zoom-info,
            .poster-options, .wall-options, .status-bar {
                display: none !important;
            }
            h1 { font-size: 22px !important; margin-bottom: 3mm !important; margin-top: 0 !important; }
            .subtitle { font-size: 11px !important; margin-bottom: 5mm !important; }
            .diagram-wrapper {
                border: 1px solid #ccc !important; border-radius: 0 !important;
                margin-bottom: 5mm !important; page-break-inside: avoid;
            }
            .diagram-container {
                height: auto !important; min-height: auto !important;
                max-height: none !important; overflow: visible !important;
                padding: 3mm !important; width: 100% !important;
            }
            .mermaid {
                transform: scale(0.25) !important;
                transform-origin: top left !important;
                width: 400% !important; max-width: none !important;
            }
            .mermaid svg { max-width: none !important; overflow: visible !important; }
            .info-section { margin-top: 3mm !important; page-break-inside: avoid; }
            .info-box {
                padding: 8px 12px !important; margin-bottom: 3mm !important;
                page-break-inside: avoid; background: #f0f8ff !important;
                border-left: 4px solid #3182ce !important;
            }
            .info-box h3 { font-size: 12px !important; margin-bottom: 5px !important; }
            .info-box p { font-size: 9px !important; margin: 3px 0 !important; line-height: 1.4 !important; }
            .footer { margin-top: 3mm !important; padding-top: 3mm !important; font-size: 9px !important; page-break-inside: avoid; }
            .footer p:last-child { display: none !important; }
        }
    </style>
</head>
<body>
    <div class="container">
        
        <h1>SDRC Customer Service Call Flow Chart</h1>
        <p class="subtitle">Decision Tree Model ‚Äì Autonomy-Focused Guidance</p>
        
        <div class="controls">
            <button onclick="zoomIn()">‚ûï Zoom In</button>
            <button onclick="zoomOut()">‚ûñ Zoom Out</button>
            <button onclick="resetZoom()">üîÑ Reset View</button>
            <button onclick="fitToScreen()">üìê Fit to Screen</button>
            <button onclick="window.print()" class="print-btn">üñ®Ô∏è Print A3</button>
            <button onclick="showWallOptions()" class="strip-btn">üß± Wall Poster</button>
            <button onclick="showPosterOptions()" class="poster-btn">üñºÔ∏è Save as Image</button>
            <div class="zoom-info">Zoom: <span id="zoomLevel">100</span>%</div>
        </div>
        
        <div class="status-bar" id="statusBar">
            <span id="statusText">‚è≥ Working...</span>
        </div>
        
        <!-- Save as Image panel -->
        <div class="poster-options" id="posterOptions">
            <label for="posterSize">Image Size:</label>
            <select id="posterSize">
                <option value="1" selected>Standard (1x) - Recommended</option>
                <option value="2">Large (2x)</option>
                <option value="3">Extra Large (3x) - May be slow</option>
            </select>
            <button onclick="savePosterImage()">üíæ Download PNG</button>
            <button onclick="hidePosterOptions()" class="cancel-btn">Cancel</button>
            <span class="poster-status" id="posterStatus"></span>
        </div>
        
        <!-- Wall Poster panel -->
        <div class="wall-options" id="wallOptions">
            <div class="wall-row">
                <label>Wall size:</label>
                <input type="number" id="wallWidth" value="120" min="30" max="500" onchange="updateWallPreview()"> cm wide
                <span style="margin: 0 5px;">√ó</span>
                <input type="number" id="wallHeight" value="80" min="20" max="300" onchange="updateWallPreview()"> cm tall
            </div>
            <div class="wall-row">
                <label>Paper:</label>
                <select id="wallPaper" onchange="updateWallPreview()">
                    <option value="a3p" selected>A3 Portrait</option>
                    <option value="a3">A3 Landscape</option>
                    <option value="a4">A4 Landscape</option>
                </select>
                <label style="margin-left:10px;">Overlap:</label>
                <select id="wallOverlap" onchange="updateWallPreview()">
                    <option value="0">None</option>
                    <option value="10" selected>10mm</option>
                    <option value="15">15mm</option>
                </select>
            </div>
            <div class="wall-info" id="wallInfo">Calculating...</div>
            <div class="wall-preview" id="wallPreview"></div>
            <div class="wall-row">
                <button onclick="printWallPoster()">üñ®Ô∏è Generate Print Pages</button>
                <button onclick="hideWallOptions()" class="cancel-btn">Cancel</button>
            </div>
            <span class="wall-status" id="wallStatus"></span>
        </div>
        
        <div class="instructions">
            <h4>üñ®Ô∏è Printing &amp; Export Options</h4>
            <ul>
                <li><b>Print A3:</b> Quick browser print to A3 paper (landscape)</li>
                <li><b>Wall Poster:</b> Set your wall dimensions, pick paper size ‚Äî generates a grid of pages to print and tape together!</li>
                <li><b>Save as Image:</b> Download as high-resolution PNG</li>
            </ul>
        </div>

        <div class="diagram-wrapper">
            <div class="diagram-container" id="diagramContainer">
                <div class="mermaid" id="mermaidDiagram">
flowchart TD
    Start(["üìû Incoming Call"]) --> Greeting["<b>GREETING</b><br/><i>SDRC, this is Name speaking.<br/>How can I help you today?</i>"]
    
    Greeting --> Verify["<b>VERIFY &amp; IDENTIFY</b><br/>1. Listen to reason for calling<br/>2. Verify customer identity"]
    
    Verify --> Category{"<b>SERVICE CATEGORY?</b>"}
    
    Category -->|Property| PropDecision{"<b>PROPERTY ISSUE?</b>"}
    Category -->|Community| CommDecision{"<b>COMMUNITY?</b>"}
    Category -->|Infrastructure| InfraDecision{"<b>INFRASTRUCTURE ISSUE?</b>"}
    Category -->|Other| OtherDecision{"<b>OTHER ISSUE?</b>"}

    %% =============================================
    %% PROPERTY SERVICES
    %% =============================================

    PropDecision -->|Rates| RatesDecision{"Payment or Admin?"}
    RatesDecision -->|Payment| RatesPayment["<b>üí∞ RATES - Payment</b><br/><br/>1. Look up property: Intramaps/TechOne<br/>Confirm customer identity<br/>2. Use Property ID in TechOne<br/>Confirm balance owing<br/>3. Process payment in BPOINT<br/><br/>üìå Eli: Rates Process"]
    RatesDecision -->|Admin| RatesAdmin["<b>üí∞ RATES - Admin</b><br/><br/><u>Payment Agreement:</u><br/>1. Look up property on TechOne<br/>2. Check rate recovery code<br/>3. If General/FirstREM/FinalREM: proceed<br/>If else: view table on Eli for action<br/>4. Run XLOne report in TechOne<br/>5. Follow spreadsheet process with customer<br/>6. Save spreadsheet to pre-approved folder<br/>7. Email spreadsheet to revenue<br/>8. Customer awaits confirmation email<br/><br/><u>Copy of Rates Notice:</u><br/>Search Property ID in Payreq<br/>Email PDF to customer<br/>If previous FY: look up fee in Fees &amp; Charges<br/><br/><u>Direct Debit:</u><br/>New: Email Form - Direct Debit Request<br/>Alter: Email Form - DD Alteration/Cancellation<br/><br/><u>Pensioner Rates Subsidy:</u><br/>Email Form - Pension Subsidy Application<br/>Request proof of pension card<br/><br/>üìå Eli: Rates Process"]

    PropDecision -->|Building| BuildingDecision{"New, Existing,<br/>or Inspection?"}
    BuildingDecision -->|New| BuildingNew["<b>üèóÔ∏è BUILDING - New</b><br/><br/>New Enquiry<br/>1. Provide Factsheets:<br/>Building Info Sheets - SDRC<br/>2. Arrange callback:<br/>Merit Building - Follow Process<br/>Provide customer with Merit #<br/><br/>üìå Eli: Building Info Sheets"]
    BuildingDecision -->|New - General Info| BuildingNewInfo["<b>üèóÔ∏è BUILDING - New Application General Information</b><br/><br/>Contractors are bound by state legislation to complete work to a standard that will pass certification.<br/><br/>If you have a project in mind, a good starting point is to obtain quotes from contractors. A contractor can advise on the specific materials/methods they would use, provide a rough schedule for completion of the work, and provide a cost estimate.<br/><br/>Speaking with several contractors will help clarify the specifics of your project, which will assist in preparing your building application. Note that no work of any description is to be commenced until your building application is approved.<br/><br/>Your application will require a DA Form 2, and depending on the nature of your build (e.g. dwelling, extension, shed, garage) multiple supporting documents.<br/>Offer to email the customer the relevant fact sheet + link to SDRC website.<br/><br/><u>A typical application includes:</u><br/>[ ] Completed DA Form 2 - this is the state government form commonly referred to as the building application<br/><br/><u>Plus supporting documents:</u><br/>[ ] Site Plan, Floor Plan, Elevations and Structural Details<br/>[ ] Footing/Slab Design and Form 15 (must be signed by RPEQ registered engineer)<br/>[ ] Energy Efficiency Report (Class 1a dwellings)<br/>[ ] Soil Test Report (Class 1a dwellings)<br/>[ ] QBCC Insurance Certificate: Mandatory insurance for residential construction valued over $3,300. Protects the owner if the builder fails to complete the work or produces defects.<br/>OR<br/>[ ] QBCC Owner Builder Permit (building yourself, value $11,000 or more): Legal permit allowing a property owner to act as their own Head Contractor. Requires completion of a short certified course through a Registered Training Organisation.<br/>[ ] QLeave Payment Receipt (if value of building work over $150,000 excl. GST): QLeave manages portable long service leave for QLD construction workers. The project must be registered on the QLeave portal before construction begins. Council cannot issue Building Approval until this receipt is sighted.<br/><br/>Note that for certain applications it may also be necessary to provide information regarding bushfire attack level, flood zone, termite protection, lighting, water tanks etc.<br/><br/><u>Private Building Certifier:</u><br/>It is possible to engage a private building certifier to prepare and lodge the application on your behalf. Most customers undertaking larger projects choose this option.<br/><br/>The certifier will assist with producing the necessary documentation, and can subcontract additional professionals when required (architects, engineers, surveyors, soil tests, energy efficiency reports, bushfire attack level reports etc.).<br/><br/>Post lodgement, the certifier will liaise with council on your behalf and conduct on-site inspections throughout construction.<br/><br/><u>Construction Inspections:</u><br/>1. Footing/Foundation<br/>2. Slab<br/>3. Frame<br/>4. Final<br/><br/>Each stage must be signed off before the next commences. Once the final inspection is passed, a Form 21 Final Certificate is issued. In the case of new dwellings, the property may not be inhabited until this certificate has been issued.<br/><br/><u>If the build does not pass inspection:</u><br/>The QBCC can issue a formal Direction to Rectify, requiring the builder to fix the work at their own cost within a set timeframe. Non-compliance may result in significant fines and licence suspension. If a builder refuses or fails to rectify defective work, the QBCC can assist the homeowner through other means, including the Queensland Home Warranty Scheme.<br/><br/>SDRC customer service staff can assist in directing specific building queries to the council building team.<br/><br/>üìå Eli: Building Info Sheets"]
    BuildingDecision -->|Existing| BuildingExist["<b>üèóÔ∏è BUILDING - Existing</b><br/><br/>Existing Application<br/>1. Transfer to relevant person<br/>2. If unavailable: Arrange callback<br/>Merit Building - Follow Process<br/>Provide customer with Merit #<br/><br/>üìå Eli: Building Applications"]
    BuildingDecision -->|Inspection| BuildingInspec["<b>üèóÔ∏è BUILDING - Inspection</b><br/><br/>Booking Building Inspections<br/>1. Follow Email Template<br/>2. Notify inspectors by email:<br/><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="1c6f786e7f7e6975707875727b5c6f786e7f326d7078327b736a327d69">[email&#160;protected]</a><br/><br/>üìå Eli: Building Inspections"]

    PropDecision -->|Plumbing| PlumbingDecision{"Type?"}
    PlumbingDecision -->|New| PlumbNew["<b>üîß PLUMBING - New Enquiry</b><br/><br/>1. Provide FAQ: Plumbing Approvals - SDRC<br/>Regulated/minor work by licensed<br/>plumber and/or drainer. Plumber<br/>will apply for required approvals.<br/>2. If necessary arrange callback:<br/>Merit Plumbing - Follow Process<br/>Provide customer with Merit #<br/><br/>üìå Eli: Plumbing FAQ"]
    PlumbingDecision -->|Existing| PlumbExist["<b>üîß PLUMBING - Existing</b><br/><br/>Existing Application<br/>1. Transfer to relevant person<br/>2. If unavailable: Arrange callback<br/>Merit Plumbing - Follow Process<br/>Provide customer with Merit #<br/><br/>üìå Eli: Plumbing Applications"]
    PlumbingDecision -->|Water/Sewer| PlumbConnect["<b>üîß PLUMBING - Connections</b><br/><br/>Connect to Sewer/Water<br/>1. Check Intramaps Water &amp; Sewerage Module<br/>2. Standard or Non-Standard? All 4 = YES:<br/>‚òê Within 100m of 100mm main<br/>‚òê Has Vacant Access Charges<br/>‚òê In declared Catchment Area<br/>‚òê Single lot/duplex/secondary/subdivision<br/>3. If Standard: Email Form -<br/>Application for Water or Sewer Services<br/>4. If Non-Standard: Email Form -<br/>Private Works (Water &amp; Sewerage Forms - SDRC)<br/><br/>üìå Eli: Connections Guide"]
    PlumbingDecision -->|Water Leak| PlumbLeak["<b>üîß PLUMBING - Water Leak</b><br/><br/>1. Check Aqualas for leak location<br/>relative to water meter<br/>2. Council side: Merit Leak<br/>Contact Maintenance Supervisor<br/>3. Customer side: Advise contact plumber<br/><br/>üìå Eli: Water Leak Procedure"]
    PlumbingDecision -->|Inspection| PlumbInspec["<b>üîß PLUMBING - Inspection</b><br/><br/>Booking Plumbing Inspections<br/>1. Get: PD number, inspection type,<br/>structure type, location, start time<br/>2. Check plumbing inspector calendar<br/>Allow time for travel<br/>3. Add inspection to calendar<br/>4. Notify inspectors by email:<br/><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="7300170110031f061e111a1d1433001701105d021f175d141c055d1206">[email&#160;protected]</a><br/><br/>üìå Eli: Plumbing Inspections"]

    PropDecision -->|Planning| PlanningDecision{"Type?"}
    PlanningDecision -->|New| PlanNew["<b>üìê PLANNING - New</b><br/><br/>New Enquiry<br/>1. Provide Factsheets:<br/>Planning Information Sheets - SDRC<br/>2. Arrange callback:<br/>Merit Planning - Follow Process<br/>Provide customer with Merit #<br/><br/>üìå Eli: Planning Info Sheets"]
    PlanningDecision -->|Existing| PlanExist["<b>üìê PLANNING - Existing</b><br/><br/>Existing Application<br/>1. Take info regarding query:<br/>Merit Planning - Follow Process<br/>Provide customer with Merit #<br/>2. Transfer to Duty Planner<br/>3. If unavailable: instruct customer<br/>to wait for callback - max 5 business days<br/><br/>üìå Eli: Planning Applications"]
    PlanningDecision -->|Payment| PlanPayment["<b>üìê PLANNING - Application Fee</b><br/><br/>Process payment in BPOINT<br/>Email receipt to:<br/><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="c4a0a1b2a1a8abb4a9a1aab084b7a0b6a7eab5a8a0eaa3abb2eaa5b1">[email&#160;protected]</a><br/><br/>üìå Eli: Planning Applications"]

    %% =============================================
    %% COMMUNITY SERVICES
    %% =============================================

    CommDecision -->|Animals| AnimalType{"Issue Type?"}
    AnimalType -->|Lost/Found| AnimalLost["<b>üêï ANIMALS - Lost/Found</b><br/><br/>Lost &amp; Found Cats, Dogs &amp; Other Animals<br/>1. Add to register:<br/>S:\Customer Service\Shared All\<br/>Animals - Lost and Found Register<br/>2. Notify CS Group + Local Laws by email<br/><br/>üìå Eli: Lost Animals Register"]
    AnimalType -->|Registration| AnimalReg["<b>üêï ANIMALS - Dog Registration</b><br/><br/>1. Email Form: Application for<br/>Dog Registration<br/>2. If applicable, request:<br/>Proof of Desexing<br/>Pension Card<br/>Dog Breeder Supply Number<br/><br/>üìå Eli: Dog Registration"]
    AnimalType -->|Impounded| AnimalImpound["<b>üêï ANIMALS - Impounded</b><br/><br/>1. Check register:<br/>S:\Customer Service\Shared All\Animals -<br/>Impoundments - Warwick - from 1 Jan 2019<br/>2. Contact Local Laws Officer to<br/>arrange collection<br/>3. Confirm release fee<br/><br/>üìå Eli: Impounded Animals"]
    AnimalType -->|Barking| BarkingType{"New or Ongoing?"}
    BarkingType -->|New| BarkNew["<b>üêï ANIMALS - Barking (New)</b><br/><br/>1. Strongly encourage direct contact<br/>with dog owner - letter template available<br/>2. Merit Barking - provide Merit #<br/>3. Provide barking dogs fact sheet +<br/>noise diary<br/>4. Instruct customer to email completed<br/>diary to <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="1479757d7854677066773a6578703a737b623a7561">[email&#160;protected]</a><br/>5. When diary received Local Laws<br/>will investigate<br/><br/>üìå Eli: Barking Procedure"]
    BarkingType -->|Ongoing| BarkOngo["<b>üêï ANIMALS - Barking (Ongoing)</b><br/><br/>1. Add note to existing Merit that<br/>another complaint has been received<br/>2. Include return phone number<br/><br/>üìå Eli: Barking Updates"]
    AnimalType -->|Surrender| AnimalSurrender["<b>üêï ANIMALS - Private Impoundment</b><br/><br/>Surrender of Dogs/Cats<br/>1. Email Form: Owners Consent to<br/>Privately Impound Dog or Cat<br/>2. Take impoundment fee over phone<br/>(Fees &amp; Charges: Private impounding)<br/>3. Email customer the receipt<br/>4. Email Local Laws the receipt<br/>5. Call Pound to arrange mutually<br/>suitable surrender time<br/><br/>üìå Eli: Private Impoundment"]
    AnimalType -->|Attack/Menacing| AnimalAttack["<b>üêï ANIMALS - Dog Attack/Menacing</b><br/><br/>Merit Attack - Record:<br/>Is customer still in danger of attack?<br/>Is the dog still in the area?<br/>Where exactly did the attack take place?<br/>When? (date and time)<br/>Was medical treatment required?<br/><br/>Email Form: Statement of Dog Attack Form<br/><br/>üìå Eli: Dog Attack Protocol"]
    AnimalType -->|Stray| AnimalStray["<b>üêï ANIMALS - Straying Dog</b><br/><br/>1. Merit Stray - Record:<br/>Location, Breed, Direction, Time<br/>2. Call Local Laws Officer to report<br/><br/>üìå Eli: Stray Dog Procedure"]
    AnimalType -->|Wildlife/Cruelty| AnimalWildlife["<b>üêï ANIMALS - Wildlife &amp; Cruelty</b><br/><br/><u>Animal Cruelty/Welfare:</u><br/>Direct to RSPCA: 1300 264 625<br/>or rspca.org.au/report-animal-cruelty<br/><br/><u>Wildlife Removal:</u><br/>Provide appropriate wildlife carer<br/>contact details to customer<br/><br/>üìå Eli: Animal Topics Index"]
    AnimalType -->|Keeping/Pest| AnimalKeepPest["<b>üêï ANIMALS - Keeping &amp; Pest</b><br/><br/><u>Keeping of Animals:</u><br/>Numbers allowed in town/rural: see<br/>Keeping of Animals Factsheet<br/>Application to keep additional animals<br/><br/><u>Pest Animals:</u><br/>Search SDRC website for Factsheets<br/>State Gov: Invasive Animals Fact Sheets<br/><br/>üìå Eli: Keeping Animals v2"]

    CommDecision -->|Environmental| EnvType{"Stage?"}
    EnvType -->|Initial| EnvStart["<b>üåø ENV NUISANCE - Start</b><br/><br/>1. Determine if council has jurisdiction<br/>Eli: Environmental Nuisance &amp; Pollution<br/>+ SDRC Website<br/>2. If NO jurisdiction:<br/>Direct to appropriate contact<br/>3. If council HAS jurisdiction:<br/>Encourage customer to reach out to<br/>polluter directly and attempt to<br/>resolve without council assistance<br/><br/>üìå Eli: Jurisdiction Check"]
    EnvType -->|Lodge| EnvLodge["<b>üåø ENV NUISANCE - Lodge</b><br/><br/>1. Merit Environment - Choose<br/>appropriate option and lodge request<br/>2. If nuisance is ongoing:<br/>Provide Environmental Nuisance Diary<br/>for evidence and to guide investigation<br/>3. Instruct customer to email completed<br/>diary (14 days) to <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="2d404c44416d5e495f4e035c4149034a425b034c58">[email&#160;protected]</a><br/>Quote Merit number in email<br/><br/>üìå Eli: Nuisance Diary"]

    CommDecision -->|Waste| WasteType{"Request Type?"}
    WasteType -->|Missed/Broken| WasteMissed["<b>üóëÔ∏è WASTE - Missed/Broken</b><br/><br/>Residential Missed Service/Broken Bins<br/>1. Confirm: address, name, phone number<br/>2. Instruct: leave damaged bin on curb<br/>Cleanaway may complete before next<br/>scheduled collection<br/>3. Customer can continue using bin<br/>4. Lodge Cleanaway Bin Request<br/><br/>üìå Cleanaway Service Request"]
    WasteType -->|Missing| WasteMissing["<b>üóëÔ∏è WASTE - Missing Bin</b><br/><br/>1. Confirm: address, name, phone number<br/>2. Lodge Cleanaway Bin Request<br/><br/>üìå Cleanaway Service Request"]
    WasteType -->|Public Place| WastePublic["<b>üóëÔ∏è WASTE - Public Place Bin</b><br/><br/>1. Confirm bin location with customer<br/>2. Check if bin is Council or Cleanaway:<br/>Intramaps - Environment &amp; Regulatory<br/>Check Cleanaway Public Place Bins Icon<br/>3. If Cleanaway: Lodge Cleanaway request<br/>4. If Council: Merit Maintenance<br/>Select Parks, Garden, Reserves<br/><br/>üìå Intramaps Guide"]
    WasteType -->|Infirm| WasteInfirm["<b>üóëÔ∏è WASTE - Infirm Service</b><br/><br/>1. Customer to provide:<br/>Letter requesting infirm service<br/>Note from registered health care practitioner<br/>2. Send to <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="503d31393c10233422337e213c347e373f267e3125">[email&#160;protected]</a><br/>Records will task to waste team directly<br/><br/>üìå Infirm Process"]
    WasteType -->|Complaint| WasteComplaint["<b>üóëÔ∏è WASTE - Cleanaway Complaint</b><br/><br/>Lodge Merit Complaint<br/>Select: Bins/Collection<br/><br/>üìå Eli: Complaint Process"]

    CommDecision -->|Complaints| ComplaintRoute["<b>üìù COMPLAINTS</b><br/><br/>For complaints about a council service:<br/><br/>Option 1: Merit Complaint<br/>Select appropriate option<br/><br/>Option 2: Email to <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="f499959d98b487908697da859890da939b82da9581">[email&#160;protected]</a><br/>Subject: ATTN: Name<br/>Records will allocate to relevant person<br/><br/>Option 3: Email Form - Complaint Form<br/><br/>üìå Eli: Complaint Process"]

    CommDecision -->|Cemetery| CemeteryType{"Type?"}
    CemeteryType -->|Reserve/Plaque| CemeteryRes["<b>‚ö±Ô∏è CEMETERY - Reserve/Plaque</b><br/><br/>New Reserve:<br/>Email Form: Reserve Application<br/><br/>üìå Eli: Cemetery Reserve"]
    CemeteryType -->|Memorial| CemeteryMemorial["<b>‚ö±Ô∏è CEMETERY - Roadside Memorial</b><br/><br/>Email Form:<br/>Roadside Memorial Application (SDRC Website)<br/><br/>üìå Eli: Roadside Memorials"]
    CemeteryType -->|Location/Interment| CemeteryLoc["<b>‚ö±Ô∏è CEMETERY - Location/Interment</b><br/><br/>1. Transfer to Cemetery staff<br/>2. If unavailable: schedule callback<br/>3. Cemetery Database - Location of<br/>Buried Person:<br/>S:\Shared All\Cemetery\Cemetery Database<br/><br/>üìå Eli: Cemetery Database"]

    CommDecision -->|Disputes| DisputeType{"Jurisdiction?"}
    DisputeType -->|Council| DisputeCouncil["<b>üè† NEIGHBOURLY DISPUTES - Council</b><br/><br/>Dust/Smoke/Noise/Light/Odour/<br/>Water Pollution:<br/>See ENV NUISANCE<br/><br/>Keeping of Animals/Barking/<br/>Dangerous Dogs: See ANIMALS<br/><br/>Illegal Use of Caravan/Tents/Buses,<br/>Illegal Use of Building,<br/>Unauthorised Building Works:<br/>Merit Building<br/><br/>Unlawful Land Use:<br/>Merit Planning<br/><br/>üìå Eli: Disputes Guide"]
    DisputeType -->|Private| DisputePrivate["<b>üè† NEIGHBOURLY DISPUTES - Private</b><br/><br/>Generally refer to QCAT<br/>QLD Gov: Housing &amp; Neighbours<br/><br/>Parking complaints outside<br/>Warwick CBD: Refer to Police<br/>Eli: Regulated Parking<br/><br/>üìå QCAT Referral"]

    %% =============================================
    %% INFRASTRUCTURE
    %% =============================================

    InfraDecision -->|Roads| RoadType{"Issue Type?"}
    RoadType -->|Pothole| RoadPot["<b>üõ£Ô∏è ROADS - Pothole</b><br/><br/>1. Merit Pothole<br/>2. Confirm: sealed or unsealed road<br/>3. Record exact location<br/><br/>üìå Eli: Pothole Reporting"]
    RoadType -->|Road Kill| RoadKill["<b>üõ£Ô∏è ROADS - Road Kill</b><br/><br/>Get details from customer:<br/><br/>If &gt;100kg: Merit Dead<br/>If &lt;100kg: Lodge Cleanaway request<br/><br/>üìå Cleanaway/TMR"]
    RoadType -->|Closure| RoadClose["<b>üõ£Ô∏è ROADS - Closure</b><br/><br/>1. Check Disaster Dashboard<br/>2. Provide link to customer<br/>for real-time updates<br/><br/>üìå Disaster Dashboard Link"]
    RoadType -->|Rail/HWY| RoadRef["<b>üõ£Ô∏è ROADS - Rail/Highway</b><br/><br/>Train Tracks / Railway Crossings:<br/>QLD Rail: 13 16 17<br/><br/>Highway:<br/>TMR: 13 20 80<br/><br/>üìå Referral Contacts"]

    InfraDecision -->|Works| WorksType{"Type?"}
    WorksType -->|Minor| WorksMinor["<b>üî® WORKS - Minor Works</b><br/><br/>Minor Works Within a Road Reserve<br/><br/>See Eli: Roads &amp; Works Forms<br/>for application requirements<br/><br/>üìå Eli: Minor Works Process"]
    WorksType -->|Private| WorksPriv["<b>üî® WORKS - Private Works</b><br/><br/>Member of public engages council<br/>to conduct works on private property<br/><br/>Roads &amp; Works Forms - SDRC<br/><br/>üìå Eli: Private Works Forms"]
    WorksType -->|Operational| WorksOp["<b>üî® WORKS - Operational Works</b><br/><br/>Operational Works inquiry<br/><br/>Merit Works + provide details<br/><br/>üìå Eli: Operational Works"]

    InfraDecision -->|Campgrounds| CampType{"Facility?"}
    CampType -->|Washpool| CampWash["<b>üèïÔ∏è WASHPOOL</b><br/><br/>Enquiries: Eli Washpool<br/>Additional info: Caretaker<br/>Vicki Lynam 0427 026 216<br/>Price: Fees &amp; Charges CTRL+F 523<br/><br/>Bookings:<br/>Refer to Vicki Lynam 0427 026 216<br/>Instruct to leave voicemail if no answer<br/><br/>üìå Eli: Washpool Guide"]
    CampType -->|Connolly Dam| CampConn["<b>üèïÔ∏è CONNOLLY DAM</b><br/><br/>Enquiries: Eli Connolly Dam Camping<br/>Price: Fees &amp; Charges CTRL+F 523<br/><br/>Bookings:<br/>Self-Registration on site<br/>Payment: Cash, cheque, or credit card<br/>Yellow permit on windscreen<br/><br/>üìå Eli: Connolly Dam"]
    CampType -->|River Road| CampRiver["<b>üèïÔ∏è CONDAMINE RIVER ROAD</b><br/><br/>1. Check Disaster Dashboard<br/>2. If rain forecasted: link customer<br/>to dashboard for most current info<br/><br/>üìå Disaster Dashboard"]

    %% =============================================
    %% OTHER SERVICES
    %% =============================================

    OtherDecision -->|Licence| LicenseType{"Action?"}
    LicenseType -->|Pay| LicensePay["<b>üìÑ LICENCE - Pay/Renew</b><br/><br/>Gather info, process via BPOINT ECM<br/>Customer email needed for receipt<br/><br/>üìå Eli: Licence Renewal"]
    LicenseType -->|Apply| LicenseApply["<b>üìÑ LICENCE - Apply</b><br/><br/>1. Find Form via:<br/>Eli FORMS - Quick Links<br/>OR SDRC Website: Permits &amp; Licences<br/>2. Email Form to customer<br/><br/>üìå Eli: Licence Forms"]

    OtherDecision -->|Claims| ClaimsRoute["<b>‚ö†Ô∏è DAMAGE OR INJURY CLAIMS</b><br/><br/>Instruct customer to include:<br/>Name, Time, Location of incident,<br/>Nature of injury/damage,<br/>Evidence: photos, witnesses, etc.<br/><br/>Send Letter of Demand:<br/>Personal/Property Damage:<br/>Subject - ATTN: CEO<br/><br/>Road Related Damage:<br/>Subject - ATTN: Governance<br/><br/>üìå Eli: Claims Process"]

    %% =============================================
    %% CONVERGENCE: CONFIRM DETAILS
    %% =============================================

    RatesPayment --> CustomerDetails
    RatesAdmin --> CustomerDetails
    BuildingInspec --> CustomerDetails
    BuildingExist --> CustomerDetails
    BuildingNew --> CustomerDetails
    BuildingNewInfo --> CustomerDetails
    PlumbNew --> CustomerDetails
    PlumbExist --> CustomerDetails
    PlumbConnect --> CustomerDetails
    PlumbLeak --> CustomerDetails
    PlumbInspec --> CustomerDetails
    PlanNew --> CustomerDetails
    PlanExist --> CustomerDetails
    PlanPayment --> CustomerDetails
    AnimalLost --> CustomerDetails
    AnimalReg --> CustomerDetails
    AnimalImpound --> CustomerDetails
    BarkNew --> CustomerDetails
    BarkOngo --> CustomerDetails
    AnimalSurrender --> CustomerDetails
    AnimalAttack --> CustomerDetails
    AnimalStray --> CustomerDetails
    AnimalWildlife --> CustomerDetails
    AnimalKeepPest --> CustomerDetails
    EnvStart --> CustomerDetails
    EnvLodge --> CustomerDetails
    WasteMissed --> CustomerDetails
    WasteMissing --> CustomerDetails
    WastePublic --> CustomerDetails
    WasteInfirm --> CustomerDetails
    WasteComplaint --> CustomerDetails
    ComplaintRoute --> CustomerDetails
    CemeteryRes --> CustomerDetails
    CemeteryMemorial --> CustomerDetails
    CemeteryLoc --> CustomerDetails
    DisputeCouncil --> CustomerDetails
    DisputePrivate --> CustomerDetails
    RoadPot --> CustomerDetails
    RoadKill --> CustomerDetails
    RoadClose --> CustomerDetails
    RoadRef --> CustomerDetails
    WorksMinor --> CustomerDetails
    WorksPriv --> CustomerDetails
    WorksOp --> CustomerDetails
    CampWash --> CustomerDetails
    CampConn --> CustomerDetails
    CampRiver --> CustomerDetails
    LicensePay --> CustomerDetails
    LicenseApply --> CustomerDetails
    ClaimsRoute --> CustomerDetails

    CustomerDetails["<b>CONFIRM DETAILS</b><br/>Name, Mobile, Email, Address"]

    %% =============================================
    %% ACTION DECISION
    %% =============================================

    CustomerDetails --> ActionDecision{"<b>ACTION?</b>"}
    
    ActionDecision -->|Lodge Merit| MeritBox["<b>üìã LODGE MERIT</b><br/><br/>1. Input appropriate keyword<br/>and follow process<br/>2. Description must include:<br/>Who, What, When, Where, Why<br/>3. Provide customer with<br/>Merit Req ID for follow-up<br/><br/>üìå Eli: Merit Process"]
    
    ActionDecision -->|Email Form| FormBox["<b>üìß EMAIL FORM</b><br/><br/>1. Find form: Eli FORMS<br/>2. Confirm customer email address<br/>3. Attach form to email<br/>4. Instruct customer: if emailing back,<br/>send to <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="ef828e8683af9c8b9d8cc19e838bc1888099c18e9a">[email&#160;protected]</a><br/>for records to process application<br/><br/>üìå Eli: FORMS"]
    
    ActionDecision -->|Process Payment| BPOINTBox["<b>üí≥ PROCESS PAYMENT - BPOINT</b><br/><br/>Ref 1: Customer Name<br/>Ref 2: Customer Address<br/>Ref 3: Reference Number<br/>(Application/Licence/Property ID)<br/>Merchant ID: Property ID<br/><br/>Email receipt to customer<br/>(confirm email address)<br/><br/>üìå Eli: BPOINT Guide"]
    
    ActionDecision -->|Transfer / Callback| TransferBox["<b>üì≤ TRANSFER / RETURN CALL</b><br/><br/>1. Establish context: Ask who &amp; why<br/><br/>2a. SDRC Staff/Department:<br/>By Name: Search The Pulse Staff List<br/>By Role: Eli Who to call - What they do<br/>Call to check availability<br/>If available: establish context, transfer<br/>If unavailable: arrange callback via<br/>Merit or email to staff/department<br/><br/>2b. Other Organisation:<br/>Provide contact details<br/>Eli Other Contacts<br/><br/>üìå Eli: Internal Directory"]
    
    ActionDecision -->|Info Provided| NoAction["<b>‚úÖ INFO PROVIDED</b><br/><br/>Customer has answer<br/>or referral contact"]
    
    MeritBox --> Close
    FormBox --> Close
    BPOINTBox --> Close
    TransferBox --> Close
    NoAction --> Close
    
    Close(["‚úÖ <b>CLOSE CALL</b><br/><br/><i>Is there anything else<br/>I can help you with today?</i>"])
    
    style Start fill:#d4edda,stroke:#28a745,stroke-width:2px
    style Close fill:#d4edda,stroke:#28a745,stroke-width:2px
    style Category fill:#fff3cd,stroke:#ffc107,stroke-width:2px
    style ActionDecision fill:#fff3cd,stroke:#ffc107,stroke-width:2px
    style BPOINTBox fill:#e8daef,stroke:#8e44ad,stroke-width:2px
    style TransferBox fill:#d4edda,stroke:#28a745,stroke-width:2px
    style CustomerDetails fill:#e2e3f3,stroke:#6c757d,stroke-width:2px
    style MeritBox fill:#f8d7da,stroke:#dc3545,stroke-width:2px
    style FormBox fill:#f8d7da,stroke:#dc3545,stroke-width:2px
    style NoAction fill:#d1ecf1,stroke:#17a2b8,stroke-width:2px
                </div>
            </div>
        </div>
        
        <div class="info-section">
            <h3>üìä How This Works (Decision Tree Model)</h3>
            
            <div class="info-box">
                <h3>üéØ Structure Overview</h3>
                <p><b>4 Service Categories:</b> Start by choosing Property, Community, Infrastructure, or Other. This immediately narrows your focus.</p>
                <p><b>Decision Diamonds:</b> Each diamond asks a simple question to narrow options. Instead of reading a "wall of text," you answer and the path becomes clear.</p>
                <p><b>Full Step-by-Step Instructions:</b> Every endpoint contains complete instructions, not abbreviations. Perfect for onboarding and quick reference.</p>
                <p><b>Actionable References:</b> Every node includes specific Eli search terms or contact numbers. No dead ends.</p>
            </div>
            
            <div class="info-box">
                <h3>üóÇÔ∏è Service Categories</h3>
                <p><b>üè† Property Services:</b> Rates, Planning, Building, Plumbing ‚Äì property ownership &amp; development issues.</p>
                <p><b>üë• Community:</b> Animals, Environmental, Waste, Complaints, Cemetery, Neighbourly Disputes ‚Äì community impact issues.</p>
                <p><b>üõ£Ô∏è Infrastructure:</b> Roads, Works, Campgrounds ‚Äì public assets &amp; facilities.</p>
                <p><b>üìã Other Services:</b> Licences, Claims ‚Äì miscellaneous.</p>
            </div>
            
            <div class="info-box">
                <h3>üé¨ Typical Call Flow</h3>
                <p><b>1.</b> Greet &amp; verify customer identity</p>
                <p><b>2.</b> Choose service category (Property, Community, Infrastructure, Other)</p>
                <p><b>3.</b> Answer decision questions to narrow down (e.g., "Barking ‚Äì new or ongoing?")</p>
                <p><b>4.</b> Follow the specific step-by-step instructions with exact Eli term</p>
                <p><b>5.</b> Confirm customer details (name, phone, email, address)</p>
                <p><b>6.</b> Take action: Lodge Merit? Email Form? Process Payment? Transfer? Or info already provided?</p>
                <p><b>7.</b> Close call ‚Äì "Anything else I can help with?"</p>
            </div>
            
            <div class="info-box">
                <h3>üí≥ BPOINT Payment Reference</h3>
                <p>Multiple service types are receipted through BPOINT (Rates, Building, Planning, Plumbing, Cemetery, Dog Registration, Keeping of Animals, Works, Licences).</p>
                <p><b>Standard BPOINT Fields:</b> Ref 1: Customer Name | Ref 2: Address | Ref 3: Reference Number (Application/Licence/Property ID) | Merchant ID: Property ID</p>
                <p><b>Always confirm customer email address</b> for sending receipts.</p>
            </div>
            
            <div class="info-box">
                <h3>üìå Using Eli References</h3>
                <p>Every decision node includes a specific "Eli: 'Topic Name'" reference. This is your exact search term in the internal knowledge base.</p>
                <p><b>Example:</b> For a barking dog, the diagram says "Eli: 'Barking Procedure'" ‚Äì search Eli with that exact phrase to find the detailed guide.</p>
            </div>
            
            <div class="info-box">
                <h3>üîë Key Systems Reference</h3>
                <p><b>Merit</b> ‚Äî Customer Request Management System (lodge issues for team action)</p>
                <p><b>Eli</b> ‚Äî Internal Knowledge Base (search for exact procedures, forms, guides)</p>
                <p><b>TechOne</b> ‚Äî Financial &amp; Property System (rates, properties, payments)</p>
                <p><b>Intramaps</b> ‚Äî Geographic Information System (GIS ‚Äì maps, facilities, bins)</p>
                <p><b>BPOINT</b> ‚Äî Payment Processing (take payments over phone)</p>
                <p><b>Aqualas</b> ‚Äî Water Leak Location System (determine council vs customer side)</p>
                <p><b>Disaster Dashboard</b> ‚Äî Road closures &amp; event status (real-time updates)</p>
                <p><b>The Pulse</b> ‚Äî Staff Directory (find SDRC employees)</p>
                <p><b>Cleanaway</b> ‚Äî Waste bin contractor (request bins, roadkill, maintenance)</p>
                <p><b>Payreq</b> ‚Äî Rates Notice System (search by Property ID for PDF copies)</p>
            </div>
        </div>
        
        <div class="footer">
            <p>SDRC Customer Service Call Flow Chart ‚Äì Decision Tree Model | For internal use only</p>
            <p><i>Tip: Use "Wall Poster" to set your wall dimensions and generate printable pages to tape together!</i></p>
        </div>
    </div>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
        let currentZoom = 100;
        const minZoom = 25;
        const maxZoom = 200;
        const zoomStep = 15;
        
        function updateZoom() {
            const mermaid = document.getElementById('mermaidDiagram');
            mermaid.style.transform = `scale(${currentZoom / 100})`;
            document.getElementById('zoomLevel').textContent = currentZoom;
        }
        function zoomIn() { if (currentZoom < maxZoom) { currentZoom += zoomStep; updateZoom(); } }
        function zoomOut() { if (currentZoom > minZoom) { currentZoom -= zoomStep; updateZoom(); } }
        function resetZoom() { currentZoom = 100; updateZoom(); document.getElementById('diagramContainer').scrollTo(0, 0); }
        function fitToScreen() { currentZoom = 60; updateZoom(); document.getElementById('diagramContainer').scrollTo(0, 0); }
        
        // =============================================
        // SAVE AS IMAGE
        // =============================================
        function showPosterOptions() {
            document.getElementById('posterOptions').classList.add('show');
            document.getElementById('posterStatus').textContent = '';
        }
        function hidePosterOptions() {
            document.getElementById('posterOptions').classList.remove('show');
            document.getElementById('posterStatus').textContent = '';
        }
        
        async function savePosterImage() {
            const statusEl = document.getElementById('posterStatus');
            const scale = parseFloat(document.getElementById('posterSize').value);
            statusEl.textContent = '‚è≥ Preparing diagram...';
            await new Promise(r => setTimeout(r, 100));
            try {
                const mc = document.getElementById('mermaidDiagram');
                if (!mc) { statusEl.textContent = '‚ùå Diagram not found.'; return; }
                if (typeof domtoimage === 'undefined') { statusEl.textContent = '‚ùå Export library not loaded.'; return; }
                statusEl.textContent = '‚è≥ Rendering image...';
                const ot = mc.style.transform;
                mc.style.transform = 'none';
                const dataUrl = await domtoimage.toPng(mc, { quality: 1, bgcolor: '#ffffff', scale: scale });
                mc.style.transform = ot;
                const link = document.createElement('a');
                link.download = `SDRC_CallFlow_${scale}x.png`;
                link.href = dataUrl;
                link.click();
                statusEl.textContent = '‚úÖ Download started!';
            } catch (e) {
                console.error('Export error:', e);
                statusEl.textContent = '‚ùå Error: ' + e.message;
            }
        }
        
        // =============================================
        // WALL POSTER (grid of pages to fill a wall)
        // =============================================
        
        const PAPER = {
            a4:  { w: 297, h: 210, label: 'A4 Landscape',  orient: 'landscape', base: 'A4' },
            a3:  { w: 420, h: 297, label: 'A3 Landscape',  orient: 'landscape', base: 'A3' },
            a3p: { w: 297, h: 420, label: 'A3 Portrait',   orient: 'portrait',  base: 'A3' }
        };
        
        function getWallConfig() {
            const targetWcm = parseInt(document.getElementById('wallWidth').value) || 120;
            const targetHcm = parseInt(document.getElementById('wallHeight').value) || 80;
            const targetWmm = targetWcm * 10;
            const targetHmm = targetHcm * 10;
            const paper = PAPER[document.getElementById('wallPaper').value];
            const overlapMm = parseInt(document.getElementById('wallOverlap').value);
            
            // How many pages to cover the wall?
            const effectiveW = paper.w - overlapMm;
            const effectiveH = paper.h - overlapMm;
            const cols = Math.max(1, Math.ceil((targetWmm - overlapMm) / effectiveW));
            const rows = Math.max(1, Math.ceil((targetHmm - overlapMm) / effectiveH));
            
            // Actual assembled size
            const actualWmm = cols * paper.w - (cols - 1) * overlapMm;
            const actualHmm = rows * paper.h - (rows - 1) * overlapMm;
            
            return {
                paper, overlapMm, cols, rows,
                totalPages: cols * rows,
                actualWcm: (actualWmm / 10).toFixed(1),
                actualHcm: (actualHmm / 10).toFixed(1),
                targetWcm, targetHcm
            };
        }
        
        function showWallOptions() {
            document.getElementById('wallOptions').classList.add('show');
            document.getElementById('wallStatus').textContent = '';
            updateWallPreview();
        }
        
        function hideWallOptions() {
            document.getElementById('wallOptions').classList.remove('show');
        }
        
        function updateWallPreview() {
            const cfg = getWallConfig();
            
            const infoEl = document.getElementById('wallInfo');
            infoEl.innerHTML = `<b>${cfg.cols} √ó ${cfg.rows} grid</b> = <b>${cfg.totalPages} pages</b> of ${cfg.paper.label}` +
                (cfg.overlapMm > 0 ? ` (${cfg.overlapMm}mm overlap)` : '') +
                `<br/>Assembled size: <b>${cfg.actualWcm}cm √ó ${cfg.actualHcm}cm</b>` +
                ` (target: ${cfg.targetWcm}cm √ó ${cfg.targetHcm}cm)`;
            
            const previewEl = document.getElementById('wallPreview');
            previewEl.innerHTML = '';
            previewEl.style.gridTemplateColumns = `repeat(${cfg.cols}, 1fr)`;
            
            const isPortrait = cfg.paper.h > cfg.paper.w;
            let pageNum = 1;
            for (let r = 0; r < cfg.rows; r++) {
                for (let c = 0; c < cfg.cols; c++) {
                    const box = document.createElement('div');
                    box.className = 'page-box';
                    if (isPortrait) {
                        box.style.width = '32px';
                        box.style.height = '45px';
                    }
                    box.textContent = pageNum++;
                    previewEl.appendChild(box);
                }
            }
        }
        
        async function printWallPoster() {
            const cfg = getWallConfig();
            const statusEl = document.getElementById('wallStatus');
            statusEl.textContent = '‚è≥ Capturing diagram at high resolution...';
            
            await new Promise(r => setTimeout(r, 100));
            
            try {
                const mc = document.getElementById('mermaidDiagram');
                if (!mc) { statusEl.textContent = '‚ùå Diagram not found.'; return; }
                if (typeof domtoimage === 'undefined') { statusEl.textContent = '‚ùå Export library not loaded.'; return; }
                
                const ot = mc.style.transform;
                mc.style.transform = 'none';
                
                let dataUrl;
                try {
                    dataUrl = await domtoimage.toPng(mc, { quality: 1, bgcolor: '#ffffff', scale: 3 });
                } catch (e1) {
                    console.warn('Scale 3 failed, trying 2:', e1);
                    try {
                        dataUrl = await domtoimage.toPng(mc, { quality: 1, bgcolor: '#ffffff', scale: 2 });
                    } catch (e2) {
                        dataUrl = await domtoimage.toPng(mc, { quality: 1, bgcolor: '#ffffff', scale: 1 });
                    }
                }
                mc.style.transform = ot;
                
                statusEl.textContent = `‚è≥ Slicing into ${cfg.cols}√ó${cfg.rows} grid (${cfg.totalPages} pages)...`;
                
                const img = new Image();
                img.onload = function() {
                    const fullW = img.width;
                    const fullH = img.height;
                    const imgAspect = fullW / fullH;
                    
                    // The assembled poster area in abstract units
                    const posterW = cfg.cols;
                    const posterH = cfg.rows;
                    const posterAspect = (cfg.cols * cfg.paper.w) / (cfg.rows * cfg.paper.h);
                    
                    // Scale image to fit the poster area (contain)
                    let drawW, drawH, drawX, drawY;
                    if (imgAspect >= posterAspect) {
                        // Image is wider ‚Äî fit to width, center vertically
                        drawW = fullW;
                        drawH = fullW / posterAspect;
                        drawX = 0;
                        drawY = -(drawH - fullH) / 2;
                    } else {
                        // Image is taller ‚Äî fit to height, center horizontally
                        drawH = fullH;
                        drawW = fullH * posterAspect;
                        drawX = -(drawW - fullW) / 2;
                        drawY = 0;
                    }
                    
                    // Virtual canvas = full poster in pixels
                    const virtualW = drawW;
                    const virtualH = drawH;
                    
                    // Each page covers this much of the virtual canvas
                    // Account for overlap in pixels
                    const overlapPxW = (cfg.overlapMm / cfg.paper.w) * (virtualW / cfg.cols) * (cfg.cols > 1 ? 1 : 0);
                    const overlapPxH = (cfg.overlapMm / cfg.paper.h) * (virtualH / cfg.rows) * (cfg.rows > 1 ? 1 : 0);
                    
                    const pageVirtualW = virtualW / cfg.cols;
                    const pageVirtualH = virtualH / cfg.rows;
                    
                    // Effective step (minus overlap)
                    const stepX = pageVirtualW - overlapPxW;
                    const stepY = pageVirtualH - overlapPxH;
                    
                    // Canvas size for each page (good DPI for printing)
                    let canvasW, canvasH;
                    if (cfg.paper.w >= cfg.paper.h) {
                        canvasW = 3000;
                        canvasH = Math.round(3000 * cfg.paper.h / cfg.paper.w);
                    } else {
                        canvasH = 3000;
                        canvasW = Math.round(3000 * cfg.paper.w / cfg.paper.h);
                    }
                    
                    const sections = [];
                    let pageNum = 1;
                    for (let row = 0; row < cfg.rows; row++) {
                        for (let col = 0; col < cfg.cols; col++) {
                            // Source rect in the virtual canvas
                            const srcX = col * stepX - drawX;
                            const srcY = row * stepY - drawY;
                            const srcW = pageVirtualW;
                            const srcH = pageVirtualH;
                            
                            const canvas = document.createElement('canvas');
                            canvas.width = canvasW;
                            canvas.height = canvasH;
                            const ctx = canvas.getContext('2d');
                            
                            ctx.fillStyle = '#ffffff';
                            ctx.fillRect(0, 0, canvasW, canvasH);
                            
                            // Draw the portion of the source image
                            ctx.drawImage(img,
                                Math.max(0, srcX), Math.max(0, srcY),
                                srcW, srcH,
                                srcX < 0 ? (-srcX / srcW) * canvasW : 0,
                                srcY < 0 ? (-srcY / srcH) * canvasH : 0,
                                canvasW, canvasH
                            );
                            
                            const label = `R${row + 1} C${col + 1} (${pageNum} of ${cfg.totalPages})`;
                            sections.push({
                                name: label,
                                row: row + 1,
                                col: col + 1,
                                dataUrl: canvas.toDataURL('image/png', 1.0)
                            });
                            pageNum++;
                        }
                    }
                    
                    statusEl.textContent = '‚è≥ Opening print preview...';
                    
                    const orientCSS = cfg.paper.orient;
                    const paperBase = cfg.paper.base;
                    const pw = cfg.paper.w + 'mm';
                    const ph = cfg.paper.h + 'mm';
                    const paperLabel = cfg.paper.label;
                    
                    // Build grid preview HTML
                    let gridHTML = '';
                    let pn = 1;
                    for (let r = 0; r < cfg.rows; r++) {
                        for (let c = 0; c < cfg.cols; c++) {
                            gridHTML += `<div class="pg">${pn}</div>`;
                            pn++;
                        }
                    }
                    
                    const printWindow = window.open('', '_blank');
                    printWindow.document.write(`
                        <!DOCTYPE html>
                        <html>
                        <head>
                            <title>SDRC Call Flow - ${cfg.cols}√ó${cfg.rows} Wall Poster</title>
                            <style>
                                @page {
                                    size: ${paperBase} ${orientCSS};
                                    margin: 0;
                                }
                                * { margin: 0; padding: 0; box-sizing: border-box; }
                                body { font-family: Arial, sans-serif; }
                                .page {
                                    width: ${pw};
                                    height: ${ph};
                                    page-break-after: always;
                                    position: relative;
                                    overflow: hidden;
                                }
                                .page:last-child { page-break-after: auto; }
                                .page img {
                                    width: 100%;
                                    height: 100%;
                                    object-fit: fill;
                                }
                                .page-label {
                                    position: absolute;
                                    bottom: 3mm;
                                    right: 3mm;
                                    background: rgba(255,255,255,0.85);
                                    padding: 1.5mm 3mm;
                                    font-size: 9px;
                                    color: #888;
                                    border: 1px solid #ccc;
                                    border-radius: 2px;
                                }
                                .instructions-page {
                                    padding: 30px;
                                    max-width: 700px;
                                    margin: 0 auto;
                                }
                                .instructions-page h1 { color: #1a365d; margin-bottom: 20px; }
                                .instructions-page p { margin-bottom: 12px; line-height: 1.6; }
                                .grid-diagram {
                                    display: inline-grid;
                                    grid-template-columns: repeat(${cfg.cols}, 1fr);
                                    gap: 5px;
                                    margin: 20px 0;
                                    padding: 15px;
                                    border: 2px solid #333;
                                    border-radius: 8px;
                                    background: #f9f9f9;
                                }
                                .grid-diagram .pg {
                                    width: 55px;
                                    height: ${cfg.paper.h > cfg.paper.w ? '75px' : '38px'};
                                    border: 2px solid #dd6b20;
                                    border-radius: 4px;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    font-weight: 700;
                                    font-size: 14px;
                                    color: #c05621;
                                    background: #fffaf0;
                                }
                                .print-action-btn {
                                    display: block;
                                    width: 100%;
                                    padding: 15px;
                                    font-size: 18px;
                                    background: #38a169;
                                    color: white;
                                    border: none;
                                    border-radius: 8px;
                                    cursor: pointer;
                                    margin-top: 20px;
                                }
                                .print-action-btn:hover { background: #2f855a; }
                                @media print {
                                    .instructions-page { display: none !important; }
                                    .page-label { display: none !important; }
                                }
                            </style>
                        </head>
                        <body>
                            <div class="instructions-page">
                                <h1>üß± ${cfg.cols}√ó${cfg.rows} Wall Poster (${cfg.totalPages} pages)</h1>
                                <p><b>Instructions:</b> Print all ${cfg.totalPages} pages, then arrange in this grid and tape together:</p>
                                <div class="grid-diagram">
                                    ${gridHTML}
                                </div>
                                <p><b>Print settings:</b></p>
                                <ul style="margin-left: 20px; margin-bottom: 15px;">
                                    <li>Paper size: <b>${paperBase}</b></li>
                                    <li>Orientation: <b>${orientCSS.charAt(0).toUpperCase() + orientCSS.slice(1)}</b></li>
                                    <li>Margins: <b>None</b> or <b>Minimum</b></li>
                                    <li>Scale: <b>Fit to page</b></li>
                                    ${cfg.overlapMm > 0 ? `<li>Pages have <b>${cfg.overlapMm}mm overlap</b> for alignment</li>` : ''}
                                </ul>
                                <p>Assembled poster: <b>${cfg.actualWcm}cm wide √ó ${cfg.actualHcm}cm tall</b></p>
                                <p>Page order: left to right, top to bottom (like reading a book)</p>
                                <button class="print-action-btn" onclick="window.print()">üñ®Ô∏è Print All ${cfg.totalPages} Pages</button>
                            </div>
                            
                            ${sections.map(s => `
                                <div class="page">
                                    <img src="${s.dataUrl}" alt="${s.name}">
                                    <div class="page-label">${s.name}</div>
                                </div>
                            `).join('')}
                        </body>
                        </html>
                    `);
                    printWindow.document.close();
                    
                    statusEl.textContent = `‚úÖ ${cfg.totalPages}-page poster ready! Check the new tab.`;
                    setTimeout(() => { statusEl.textContent = ''; }, 5000);
                };
                
                img.onerror = function() {
                    statusEl.textContent = '‚ùå Error loading image.';
                };
                
                img.src = dataUrl;
                
            } catch (error) {
                console.error('Wall poster error:', error);
                statusEl.textContent = '‚ùå Error: ' + error.message;
            }
        }
        
        // =============================================
        // MOUSE & KEYBOARD CONTROLS
        // =============================================
        document.getElementById('diagramContainer').addEventListener('wheel', function(e) {
            if (e.ce.ctrlKey) {
                e.preventDefault();
                if (e.deltaY < 0) {
                    zoomIn();
                } else {
                    zoomOut();
                }
            }
        }, { passive: false });

        // Drag to pan
        let isDragging = false;
        let startX, startY, scrollLeft, scrollTop;
        const container = document.getElementById('diagramContainer');

        container.addEventListener('mousedown', function(e) {
            isDragging = true;
            startX = e.pageX - container.offsetLeft;
            startY = e.pageY - container.offsetTop;
            scrollLeft = container.scrollLeft;
            scrollTop = container.scrollTop;
        });

        container.addEventListener('mouseleave', function() { isDragging = false; });
        container.addEventListener('mouseup', function() { isDragging = false; });
        container.addEventListener('mousemove', function(e) {
            if (!isDragging) return;
            e.preventDefault();
            const x = e.pageX - container.offsetLeft;
            const y = e.pageY - container.offsetTop;
            const walkX = (x - startX) * 1.5;
            const walkY = (y - startY) * 1.5;
            container.scrollLeft = scrollLeft - walkX;
            container.scrollTop = scrollTop - walkY;
        });

        // Keyboard zoom controls
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && (e.key === '=' || e.key === '+')) { e.preventDefault(); zoomIn(); }
            if (e.ctrlKey && e.key === '-') { e.preventDefault(); zoomOut(); }
            if (e.ctrlKey && e.key === '0') { e.preventDefault(); resetZoom(); }
        });
    </script>
</body>
    </html>
