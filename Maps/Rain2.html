<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warwick Flood Simulation - 2010 Event Model</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #1a1a1a; overflow: hidden; }
        #viewer { width: 100%; height: 100vh; }
        
        .panel { position: absolute; background: rgba(0,0,0,0.85); color: white; border-radius: 8px; padding: 15px; }
        .controls { top: 20px; left: 20px; min-width: 300px; }
        .stats { bottom: 20px; right: 20px; min-width: 280px; }
        .info { top: 20px; right: 20px; max-width: 350px; font-size: 13px; line-height: 1.6; }
        
        h3 { margin-bottom: 12px; color: #4CAF50; font-size: 16px; }
        .param { margin: 10px 0; }
        label { display: block; margin-bottom: 5px; font-size: 13px; color: #aaa; }
        input[type="range"] { width: 100%; }
        .value { color: #4CAF50; font-weight: bold; }
        
        button { background: #4CAF50; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px 5px 0 0; font-size: 14px; }
        button:hover { background: #66BB6A; }
        button:disabled { background: #555; cursor: not-allowed; }
        button.danger { background: #f44336; }
        button.danger:hover { background: #ef5350; }
        button.warning { background: #FF9800; }
        button.warning:hover { background: #FFB74D; }
        
        .stat-row { display: flex; justify-content: space-between; margin: 8px 0; padding: 5px 0; border-bottom: 1px solid #333; }
        .stat-label { color: #888; }
        .stat-value { color: white; font-weight: bold; }
        
        .legend { margin-top: 10px; padding-top: 10px; border-top: 1px solid #333; font-size: 11px; }
        .legend-item { margin: 3px 0; }
        .legend-dot { display: inline-block; width: 12px; height: 12px; border-radius: 50%; margin-right: 5px; vertical-align: middle; }
    </style>
</head>
<body>
    <div id="viewer"></div>
    
    <div class="panel controls">
        <h3>üåßÔ∏è Flood Simulation - 2010 Warwick Event</h3>
        
        <div class="param">
            <label>Rainfall: <span class="value" id="rainfallVal">282</span> mm</label>
            <input type="range" id="rainfall" min="50" max="500" value="282" step="1">
        </div>
        
        <div class="param">
            <label>Duration: <span class="value" id="durationVal">30</span> days</label>
            <input type="range" id="duration" min="5" max="90" value="30" step="1">
        </div>
        
        <div class="param">
            <label>Drainage: <span class="value" id="drainageVal">75</span>%</label>
            <input type="range" id="drainage" min="0" max="100" value="75" step="1">
        </div>
        
        <div class="param">
            <label>Speed: <span class="value" id="speedVal">1</span>x</label>
            <input type="range" id="speed" min="1" max="10" value="1" step="1">
        </div>
        
        <div style="margin-top: 15px;">
            <button id="startBtn">‚ñ∂ Start</button>
            <button id="pauseBtn" disabled>‚è∏ Pause</button>
            <button id="resetBtn" class="danger">‚èπ Reset</button>
        </div>
        
        <div style="margin-top: 10px;">
            <button id="toggleRivers">Show Rivers</button>
            <button id="resetView">Reset View</button>
        </div>
    </div>
    
    <div class="panel info">
        <h3>üí° About This Simulation</h3>
        <p><strong>Historical Event:</strong> January 2010 Warwick flood</p>
        <p><strong>Rainfall:</strong> 282mm over ~30 days</p>
        <p><strong>Key Features:</strong></p>
        <ul style="margin-left: 20px; margin-top: 5px;">
            <li>River channel detection</li>
            <li>Water flows OUT via rivers</li>
            <li>Realistic drainage rates</li>
            <li>1 day/second time scale</li>
        </ul>
        <div class="legend">
            <strong>Water Depth:</strong>
            <div class="legend-item"><span class="legend-dot" style="background:#64c8ff"></span> 100mm - Light blue</div>
            <div class="legend-item"><span class="legend-dot" style="background:#8080e0"></span> 500mm - Blue-purple</div>
            <div class="legend-item"><span class="legend-dot" style="background:#9632c8"></span> 1000mm+ - Purple</div>
        </div>
    </div>
    
    <div class="panel stats">
        <h3>üìä Simulation Stats</h3>
        <div class="stat-row">
            <span class="stat-label">Day:</span>
            <span class="stat-value" id="statDay">0 / 30</span>
        </div>
        <div class="stat-row">
            <span class="stat-label">Total Water:</span>
            <span class="stat-value" id="statWater">0 ML</span>
        </div>
        <div class="stat-row">
            <span class="stat-label">Max Depth:</span>
            <span class="stat-value" id="statDepth">0 mm</span>
        </div>
        <div class="stat-row">
            <span class="stat-label">River Outflow:</span>
            <span class="stat-value" id="statOutflow">0 ML</span>
        </div>
        <div class="stat-row">
            <span class="stat-label">Avg Saturation:</span>
            <span class="stat-value" id="statSat">0%</span>
        </div>
    </div>

    <script>
// Embedded Warwick terrain data
const WARWICK_DATA = 
{"elevationData":[556.010009765625,547.5070190429688,547.177001953125,557.7130126953125,550.4849853515625,569.0349731445312,563.3610229492188,541.8699951171875,552.2620239257812,573.0659790039062,583.6420288085938,563.31298828125,558.489013671875,560.6859741210938,571.9349975585938,586.052978515625,611.281005859375,588.6099853515625,564.1290283203125,575.3359985351562,580.02001953125,654.5460205078125,550.0650024414062,515.7689819335938,499.92498779296875,499.5480041503906,509.95599365234375,525.9819946289062,600.6890258789062,657.8159790039062,623.0390014648438,611.3209838867188,576.802978515625,575.6890258789062,556.1300048828125,550.843017578125,537.906005859375,529.3270263671875,533.0999755859375,521.5659790039062,512.6649780273438,507.4939880371094,505.5690002441406,506.7980041503906,493.635986328125,496.61700439453125,498.635009765625,506.14300537109375,490.0050048828125,488.64300537109375,473.47100830078125,468.2409973144531,470.37298583984375,472.47198486328125,471.32000732421875,471.3179931640625,466.7139892578125,467.42999267578125,479.12200927734375,494.02301025390625,555.5889892578125,544.4559936523438,534.89599609375,548.7219848632812,545.4089965820312,563.1160278320312,562.9609985351562,541.22998046875,558.9249877929688,557.6610107421875,569.10302734375,549.3380126953125,551.0989990234375,568.1339721679688,581.6370239257812,595.1389770507812,605.3040161132812,601.6909790039062,592.9979858398438,658.27197265625,630.8880004882812,650.510009765625,659.9719848632812,595.781005859375,510.45098876953125,495.8940124511719,546.635009765625,546.2960205078125,655.0960083007812,629.6329956054688,609.4450073242188,583.8740234375,575.583984375,564.0390014648438,554.2960205078125,537.5659790039062,535.52197265625,518.7509765625,526.739990234375,513.5089721679688,505.62701416015625,500.8760070800781,497.8550109863281,498.3389892578125,501.052001953125,503.75299072265625,509.47601318359375,515.5650024414062,505.1210021972656,482.1319885253906,485.2349853515625,466.6340026855469,465.9049987792969,466.47900390625,475.2919921875,477.0929870605469,463.1789855957031,462.5719909667969,473.44500732421875,504.1499938964844,551.5989990234375,540.1019897460938,527.218994140625,534.7160034179688,536.4949951171875,549.6259765625,567.3099975585938,529.5960083007812,532.64501953125,539.5120239257812,544.56298828125,550.0120239257812,561.8770141601562,583.094970703125,589.8920288085938,582.5009765625,585.5499877929688,602.7529907226562,609.2239990234375,636.43701171875,611.85400390625,657.3629760742188,667.7420043945312,601.2310180664062,496.3909912109375,506.85699462890625,517.4340209960938,551.6619873046875,653.22900390625,592.7890014648438,588.5859985351562,571.4580078125,545.6110229492188,547.4869995117188,541.656982421875,534.9299926757812,525.635986328125,516.405029296875,522.1160278320312,520.8740234375,512.3690185546875,517.1640014648438,497.5169982910156,488.81500244140625,494.5450134277344,495.9129943847656,506.0929870605469,514.1859741210938,501.52398681640625,484.260986328125,490.9540100097656,487.09698486328125,475.4809875488281,463.27099609375,478.39300537109375,473.36199951171875,462.0249938964844,471.2380065917969,488.3590087890625,521.6740112304688,544.3309936523438,548.302001953125,529.8099975585938,523.3099975585938,525.9450073242188,536.447998046875,541.1510009765625,542.6519775390625,584.3569946289062,568.8389892578125,556.7479858398438,551.1909790039062,565.2069702148438,582.4110107421875,572.10302734375,573.06201171875,584.4920043945312,598.4080200195312,611.2540283203125,622.8200073242188,603.9600219726562,602.4290161132812,660.8930053710938,684.2589721679688,535.5469970703125,491.72100830078125,536.2830200195312,564.5570068359375,634.468994140625,622.85400390625,581.1439819335938,555.0490112304688,538.1500244140625,527.18701171875,522.3569946289062,527.6420288085938,519.385986328125,524.3389892578125,515.0449829101562,530.5809936523438,517.9290161132812,506.75201416015625,497.22698974609375,490.1470031738281,487.5769958496094,491.635986328125,497.239990234375,502.9840087890625,495.6889953613281,494.7040100097656,496.11700439453125,481.1669921875,474.3599853515625,462.8699951171875,462.5249938964844,467.09100341796875,467.01800537109375,460.1719970703125,501.8380126953125,506.8210144042969,536.6300048828125,542.0230102539062,531.7760009765625,517.843994140625,521.4810180664062,529.2999877929688,517.0430297851562,532.6420288085938,566.1580200195312,596.2139892578125,578.281982421875,549.551025390625,555.7760009765625,563.8410034179688,565.9130249023438,581.5700073242188,591.4229736328125,608.60400390625,648.1480102539062,634.697021484375,647.2839965820312,591.1090087890625,624.031982421875,631.1420288085938,515.9219970703125,491.04901123046875,508.2959899902344,523.9630126953125,612.6790161132812,575.468017578125,552.3170166015625,542.8829956054688,541.6790161132812,525.8419799804688,516.4149780273438,520.156982421875,513.656982421875,511.0889892578125,509.5379943847656,522.7769775390625,510.4159851074219,509.91900634765625,494.5719909667969,486.36700439453125,486.6090087890625,487.8089904785156,485.70599365234375,495.29998779296875,498.2659912109375,494.3529968261719,493.3179931640625,491.3210144042969,486.5220031738281,464.97100830078125,461.3280029296875,459.4320068359375,459.5780029296875,477.85699462890625,492.2120056152344,494.3590087890625,525.5139770507812,526.7039794921875,534.56298828125,519.7630004882812,513.489990234375,516.093994140625,510.0610046386719,535.7039794921875,576.7260131835938,579.2119750976562,578.916015625,560.8400268554688,557.5659790039062,561.468017578125,564.458984375,575.1690063476562,586.5239868164062,605.7650146484375,621.9030151367188,658.7479858398438,687.593994140625,605.7509765625,564.6160278320312,524.155029296875,512.583984375,488.9070129394531,504.5710144042969,537.0349731445312,615.2030029296875,569.1430053710938,543.64697265625,535.2069702148438,521.9400024414062,522.1950073242188,516.2080078125,507.25299072265625,509.2359924316406,504.0220031738281,511.33599853515625,536.8300170898438,510.8550109863281,495.31298828125,491.1759948730469,481.3139953613281,482.01800537109375,488.68499755859375,483.572998046875,499.4119873046875,503.0159912109375,493.0360107421875,486.2090148925781,488.3320007324219,485.90899658203125,469.0899963378906,460.65399169921875,459.60198974609375,468.5450134277344,472.1650085449219,481.2749938964844,490.21099853515625,521.0549926757812,519,530.9010009765625,519.4429931640625,509.30499267578125,507.6579895019531,506.50299072265625,529.8179931640625,560.7999877929688,565.155029296875,556.2999877929688,552.572021484375,552.9039916992188,567.89697265625,571.989013671875,575.5910034179688,591.1389770507812,595.9240112304688,579.4710083007812,611.594970703125,638.3209838867188,673.4409790039062,639.64599609375,611.2880249023438,499.6839904785156,494.0379943847656,489.30499267578125,511.8970031738281,591.780029296875,578.8820190429688,537.2730102539062,526.5809936523438,517.9860229492188,509.8330078125,513.8560180664062,500.7650146484375,501.7229919433594,499.0790100097656,509,517.8989868164062,506.47601318359375,494.9570007324219,486.87298583984375,481.0480041503906,474.0090026855469,480.0710144042969,481.87298583984375,499.6830139160156,492.0719909667969,490.17401123046875,484.010009765625,485.0090026855469,483.6340026855469,464.8659973144531,461.12701416015625,458.1189880371094,472.6629943847656,489.2279968261719,489.1470031738281,483.20599365234375,512.5289916992188,513.510009765625,529.0700073242188,521.6630249023438,504.6080017089844,508.90301513671875,500.156005859375,520.9539794921875,550.0590209960938,535.1669921875,541.416015625,537.5449829101562,536.0040283203125,547.6329956054688,541.6630249023438,555.3099975585938,578.4450073242188,568.7109985351562,562.1530151367188,570.3809814453125,632.1430053710938,639.9949951171875,569.052001953125,583.0659790039062,515.3800048828125,495.9530029296875,486.0920104980469,507.53399658203125,563.1710205078125,547.760986328125,539.0960083007812,523.1339721679688,529.9210205078125,519.9180297851562,506.82598876953125,497.2669982910156,500.41400146484375,493.1409912109375,501.10198974609375,515.7319946289062,505.3009948730469,495.4049987792969,483.5840148925781,476.5799865722656,470.8039855957031,471.9320068359375,481.9930114746094,494.6510009765625,484.1940002441406,484.0400085449219,479.2430114746094,474.9549865722656,476.7229919433594,462.9169921875,459.65399169921875,460.79901123046875,477.25,482.3680114746094,479.6369934082031,473.8399963378906,506.3869934082031,505.49700927734375,516.760009765625,516.4509887695312,504.2749938964844,500.38299560546875,497.6929931640625,501.7460021972656,532.2639770507812,521.0570068359375,529.3109741210938,520.926025390625,533.0260009765625,537.5130004882812,530.2830200195312,554.4580078125,552.5650024414062,552.4390258789062,554.89697265625,584.8729858398438,607.301025390625,614.18701171875,531.3099975585938,522.6489868164062,515.7620239257812,495.79901123046875,478.8320007324219,505.6319885253906,533.3049926757812,554.2680053710938,542.5700073242188,548.7239990234375,559.5960083007812,523.9210205078125,522.625,514.9219970703125,491.6659851074219,489.15301513671875,494.656005859375,510.197998046875,519.8800048828125,499.09100341796875,487.80999755859375,481.2380065917969,481.3699951171875,466.3489990234375,477.989990234375,487.9849853515625,478.072998046875,472.4440002441406,468.96600341796875,466.4010009765625,463.8580017089844,462.0090026855469,459.54998779296875,473.6730041503906,472.7959899902344,472.7980041503906,472.4739990234375,468.08099365234375,507.4750061035156,499.77398681640625,507.9630126953125,508.8550109863281,504.5459899902344,496.6310119628906,493.7349853515625,509.9880065917969,532.343994140625,511.5790100097656,520.10302734375,510.4230041503906,516.0570068359375,518.7979736328125,525.1060180664062,537.958984375,534.1409912109375,547.6909790039062,571.0009765625,572.155029296875,578.1640014648438,561.635986328125,544.2329711914062,509.22698974609375,502.81201171875,497.2720031738281,481.3290100097656,511.0369873046875,535.1669921875,546.177978515625,548.8660278320312,568.4010009765625,549.2440185546875,526.156982421875,517.4420166015625,504.4580078125,500.9849853515625,487.0039978027344,488.4649963378906,500.74700927734375,506.8269958496094,496.3550109863281,487.22698974609375,484.91900634765625,477.67401123046875,467.16900634765625,471.0799865722656,481.2690124511719,467.4830017089844,462.68798828125,461.0840148925781,465.6289978027344,456.9320068359375,459.6669921875,462.0329895019531,466.7929992675781,465.6919860839844,468.1260070800781,465.2720031738281,458.1910095214844,510.8179931640625,496.1709899902344,494.52801513671875,506.38800048828125,518.6209716796875,494.8789978027344,491.94000244140625,500.5190124511719,506.0350036621094,501.84100341796875,501.114990234375,503.49200439453125,511.51300048828125,519.802001953125,521.3770141601562,525.8779907226562,535.4979858398438,543.81298828125,565.1890258789062,535.3590087890625,541.2739868164062,548.3720092773438,548.2630004882812,510.5820007324219,493.4259948730469,484.42401123046875,480.3789978027344,497.1839904785156,522.3359985351562,520.4110107421875,529.0850219726562,528.2849731445312,530.9609985351562,527.8380126953125,521.3189697265625,503.9209899902344,493.6260070800781,488.1820068359375,483.21600341796875,491.1080017089844,504.0060119628906,495.7749938964844,485.7879943847656,478.06500244140625,477.01300048828125,462.6730041503906,470.1610107421875,480.83099365234375,463.4530029296875,457.8349914550781,458.79400634765625,459.1109924316406,460.3070068359375,461.447998046875,466.49700927734375,463.6510009765625,466.031005859375,464.4469909667969,463.9540100097656,481.30499267578125,494.8810119628906,502.31298828125,488.21099853515625,499.0740051269531,512.14501953125,499.6289978027344,493.8370056152344,491.3190002441406,492.1310119628906,501.1650085449219,500.5299987792969,509.4880065917969,516.3140258789062,530.1500244140625,536.9580078125,536.5150146484375,549.2890014648438,560.791015625,552.281005859375,531.8709716796875,525.1640014648438,553.4229736328125,538.3330078125,515.7130126953125,490.6050109863281,479.614990234375,478.42401123046875,500.239013671875,502.85101318359375,503.593994140625,515.666015625,512.676025390625,520.4169921875,533.8389892578125,524.31298828125,505.9530029296875,491.68499755859375,485.3340148925781,481.7090148925781,486.9259948730469,498.22900390625,491.4010009765625,492.19000244140625,477.0379943847656,469.12200927734375,465.11199951171875,464.1910095214844,474.52398681640625,457.6449890136719,459.1050109863281,462.656005859375,475.3970031738281,477.4169921875,463.864013671875,460.74700927734375,462.5270080566406,464.00799560546875,471.0169982910156,485.7489929199219,495.17498779296875,491.80999755859375,493.52398681640625,494.9549865722656,490.093994140625,503.9909973144531,490.0840148925781,487.6210021972656,500.28900146484375,512.2979736328125,524.4340209960938,524.5029907226562,522.3889770507812,523.1929931640625,548.0579833984375,555.5700073242188,542.302978515625,545.2449951171875,545.9730224609375,533.906982421875,517.3909912109375,523.2689819335938,523.1810302734375,520.7919921875,509.8900146484375,483.24200439453125,473.54901123046875,495.52099609375,486.052001953125,488.4779968261719,498.0260009765625,507.614990234375,511.5429992675781,511.2659912109375,525.343017578125,519.6649780273438,501.75299072265625,495.1419982910156,493.2139892578125,479.43798828125,486.16900634765625,496.8659973144531,485.9410095214844,494.5769958496094,482.2829895019531,468.4849853515625,463.1679992675781,458.41400146484375,464.1929931640625,457.3900146484375,461.89300537109375,472.9809875488281,483.09100341796875,483.8999938964844,476.0260009765625,474.1099853515625,471.25,479.7929992675781,496.72100830078125,489.177001953125,505.58099365234375,500.5260009765625,483.2080078125,497.1059875488281,482.0580139160156,493.2850036621094,485.2760009765625,495.85198974609375,520.27099609375,529.8939819335938,531.7899780273438,543.4849853515625,537.68701171875,525.4940185546875,548.8870239257812,540.7340087890625,533.0889892578125,538.5050048828125,544.5819702148438,526.2069702148438,516.7839965820312,513.968017578125,496.42401123046875,495.01300048828125,489.82501220703125,480.80499267578125,475.3840026855469,476.4930114746094,498.7560119628906,503.9880065917969,503.3909912109375,498.9649963378906,509.0190124511719,502.42401123046875,509.8630065917969,519.0789794921875,512.35400390625,501.677001953125,485.60198974609375,476.8169860839844,479.33599853515625,489.802001953125,482.0570068359375,491.3240051269531,483.9289855957031,476.6059875488281,470.47601318359375,457.2080078125,457.593994140625,456.9079895019531,464.6260070800781,474.0509948730469,485.32598876953125,495.84600830078125,492.2640075683594,495.52099609375,492.3370056152344,483.9419860839844,500.3190002441406,508.9230041503906,514.7020263671875,503.0409851074219,486.92401123046875,485.18499755859375,478.07598876953125,483.62200927734375,485.97198486328125,498.468994140625,521.7529907226562,550.6649780273438,577.416015625,562.8560180664062,553.7769775390625,535.56298828125,541.7940063476562,529.2130126953125,522.6019897460938,535.6539916992188,533.1129760742188,535.802978515625,559.1439819335938,535.7639770507812,513.0889892578125,494.5159912109375,484.0270080566406,478.4800109863281,474.0329895019531,469.02099609375,491.4599914550781,496.1300048828125,492.8059997558594,500.7850036621094,506.5369873046875,498.0559997558594,498.60198974609375,502.95098876953125,517.593994140625,505.9320068359375,490.5769958496094,482.4460144042969,474.5830078125,480.03399658203125,480.6090087890625,478.6029968261719,482.1310119628906,478.3489990234375,472.4440002441406,461.6780090332031,456.1159973144531,457.00799560546875,469.7149963378906,473.1390075683594,481.7049865722656,491.8290100097656,503.177001953125,508.3599853515625,507.2659912109375,502.0459899902344,508.7760009765625,515.5700073242188,512.1859741210938,486.4119873046875,483.614990234375,475.36199951171875,480.7229919433594,486.6709899902344,498.1319885253906,503.7569885253906,522.572021484375,576.510986328125,604.0469970703125,579.7449951171875,558.8809814453125,547.4219970703125,535.1589965820312,523.0059814453125,513.0919799804688,518.6420288085938,529.5250244140625,548.0910034179688,551.7789916992188,560.5449829101562,514.4730224609375,494.4639892578125,487.6310119628906,489.0199890136719,483.5719909667969,472.4100036621094,473.9169921875,486.6159973144531,504.5119934082031,513.0700073242188,513.6279907226562,500.22100830078125,486.36700439453125,493.6709899902344,495.81298828125,498.7879943847656,489.47100830078125,476.6579895019531,473.0610046386719,474.96099853515625,484.3739929199219,474.8699951171875,471.5870056152344,478.0169982910156,474.0469970703125,460.74700927734375,461.281005859375,453.6830139160156,466.8299865722656,481.2950134277344,489.2969970703125,493.239013671875,494.50201416015625,497.94000244140625,491.36700439453125,493.97698974609375,501.4200134277344,508.12200927734375,505.1839904785156,482.2080078125,473.2340087890625,475.3970031738281,482.8299865722656,497.60400390625,515.697021484375,515.6610107421875,531.0780029296875,559.2490234375,594.3930053710938,568.5579833984375,555.7269897460938,547.8699951171875,531.916015625,522.9530029296875,510.2130126953125,512.7680053710938,531.4190063476562,546.5809936523438,536.6680297851562,554.5159912109375,517.4879760742188,512.322021484375,500.30999755859375,486.91900634765625,473.4800109863281,471.6300048828125,489.74200439453125,496.16900634765625,502.4330139160156,512.7559814453125,508.8919982910156,497.8800048828125,486.0989990234375,482.64599609375,485.70098876953125,490.55499267578125,488.3190002441406,474.614990234375,470.5820007324219,471.3450012207031,478.92401123046875,477.3429870605469,465.656005859375,467.6239929199219,471.1730041503906,460.8340148925781,460.093994140625,456.4679870605469,465.78900146484375,483.5329895019531,479.74700927734375,482.1629943847656,482.5780029296875,486.0140075683594,481.5899963378906,487.2640075683594,492.2179870605469,501.84100341796875,501.4469909667969,475.6499938964844,471.5740051269531,476.26800537109375,485.8190002441406,495.9729919433594,505.6300048828125,515.60498046875,528.573974609375,548.6430053710938,568.8729858398438,554.1959838867188,538.7210083007812,543.2239990234375,529.0789794921875,528.1110229492188,514.5150146484375,507.22198486328125,521.4719848632812,522.8369750976562,535.2670288085938,574.698974609375,538.8309936523438,523.5919799804688,507.10101318359375,496.739990234375,484.5979919433594,470.3429870605469,476.4519958496094,488.60198974609375,494.7179870605469,494.9530029296875,501.1700134277344,500.2669982910156,486.73199462890625,477.3890075683594,477.92999267578125,481.4540100097656,487.5,480.6470031738281,469.6730041503906,467.5799865722656,465.6669921875,466.3580017089844,463.47100830078125,460.4209899902344,460.1520080566406,462.6669921875,459.1050109863281,455.239013671875,463.5660095214844,476.739013671875,467.6780090332031,471.5299987792969,473.10198974609375,473.9809875488281,485.2359924316406,493.4360046386719,501.2340087890625,503.9809875488281,510.7539978027344,474.1059875488281,475.3080139160156,482.8429870605469,488.1510009765625,494.6709899902344,519.5980224609375,556.7109985351562,542.5780029296875,556.4929809570312,588.1229858398438,552.77197265625,530.3159790039062,529.8920288085938,520.6060180664062,527.7509765625,514.5,501.32501220703125,506.9320068359375,520.0750122070312,541.7639770507812,550.1339721679688,527.5280151367188,509.85101318359375,496.9429931640625,488.1300048828125,486.489990234375,474.60101318359375,467.447998046875,469.6189880371094,484.0429992675781,493.0369873046875,496.0450134277344,503.47601318359375,487.875,477.3840026855469,473.6730041503906,474.6700134277344,482.8550109863281,487.02301025390625,478.5589904785156,469.81298828125,468.8819885253906,465.23699951171875,465.9530029296875,467.0639953613281,459.11700439453125,456.947998046875,458.9530029296875,455.34100341796875,458.8139953613281,460.656005859375,462.8810119628906,471.989013671875,480.28399658203125,481.2869873046875,483.5570068359375,491.32000732421875,494.0350036621094,500.87298583984375,502.5539855957031,476.8689880371094,467.2659912109375,478.6629943847656,485.1400146484375,491.677001953125,503.0870056152344,519.2169799804688,551.6680297851562,589.8619995117188,582.2130126953125,552.1530151367188,527.9990234375,516.8380126953125,510.8389892578125,523.5170288085938,523.7689819335938,498.8970031738281,505.2330017089844,522.239990234375,530.3790283203125,534.5130004882812,518.822021484375,505.6579895019531,494.8800048828125,495.2239990234375,485.0429992675781,480.94000244140625,469.0769958496094,470.0260009765625,487.27099609375,502.11199951171875,490.2080078125,488.7040100097656,484.531005859375,475.8059997558594,468.4779968261719,470.0050048828125,475.29998779296875,480.8299865722656,480.8280029296875,476.5849914550781,476.614990234375,480.56298828125,481.2619934082031,467.9259948730469,459.9330139160156,457.87701416015625,455.94000244140625,454.07501220703125,456.7409973144531,463.92999267578125,474.6419982910156,479.635009765625,482.375,487.6809997558594,490.7279968261719,492.09600830078125,494.8389892578125,491.1400146484375,504.3389892578125,472.8590087890625,467.40301513671875,468.0539855957031,478.6289978027344,488.17498779296875,502.7019958496094,521.0250244140625,544.5469970703125,612.218994140625,572.72900390625,547.1500244140625,517.8790283203125,507.28399658203125,499.90301513671875,514.2479858398438,511.9079895019531,495.9129943847656,500.3599853515625,510.44500732421875,523.2990112304688,540.8170166015625,519.8889770507812,505.6239929199219,495.77099609375,486.61199951171875,482.0419921875,480.3039855957031,476.3139953613281,467.6000061035156,490.7489929199219,506.1709899902344,492.4410095214844,483.4800109863281,477.27398681640625,476.59600830078125,472.5509948730469,465.5270080566406,470.239990234375,476.1889953613281,480.3190002441406,480.68798828125,488.8429870605469,483.2539978027344,473.9649963378906,466.8089904785156,457.5920104980469,455.2239990234375,457.0350036621094,455.3590087890625,465.66400146484375,467.697998046875,475.677001953125,481.6969909667969,485.1549987792969,479.6449890136719,485.2820129394531,482.40301513671875,482.614990234375,497.6860046386719,504.55999755859375,467.9840087890625,466.9849853515625,470.01300048828125,479.0979919433594,486.9110107421875,497.0140075683594,516.6749877929688,538.9210205078125,585.0889892578125,568.614990234375,534.719970703125,517.1519775390625,499.4750061035156,494.62200927734375,507.31201171875,505.92999267578125,488.27801513671875,506.1860046386719,519.833984375,545.4400024414062,548.5260009765625,533.7990112304688,520.3839721679688,505.0889892578125,494.03399658203125,483.4460144042969,475.2959899902344,466.1159973144531,464.6449890136719,476.84698486328125,489.20599365234375,507.2820129394531,491.4280090332031,490.7309875488281,494.6549987792969,480.89801025390625,467.61199951171875,466.89801025390625,468.3429870605469,475.5050048828125,482.30499267578125,488.3970031738281,477.531005859375,471.6400146484375,464.94000244140625,458.1579895019531,454.9549865722656,455.2120056152344,451.7560119628906,456.1960144042969,459.2030029296875,462.06500244140625,467.6130065917969,468.4469909667969,469.6239929199219,471.5690002441406,476.0769958496094,485.61199951171875,496.66400146484375,508.37799072265625,467.8970031738281,467.98199462890625,477.45001220703125,494.7279968261719,495.7340087890625,506.96099853515625,515.4970092773438,527.9509887695312,561.6220092773438,560.447998046875,537.1740112304688,505.9679870605469,498.8190002441406,490.3699951171875,507.47601318359375,501.2770080566406,490.510986328125,498.32501220703125,514.9320068359375,524.6259765625,542.8319702148438,547.5599975585938,533.281982421875,507.5989990234375,491.4809875488281,485.0690002441406,474.677001953125,462.38800048828125,466.4280090332031,460.5950012207031,466.4939880371094,476.8210144042969,490.9729919433594,500.739013671875,487.77398681640625,476.885986328125,465.0790100097656,465.2229919433594,472.2099914550781,480.42401123046875,490.10400390625,479.3999938964844,472.135009765625,466.927001953125,459.52301025390625,457.7080078125,454.3550109863281,455.68798828125,455.0220031738281,455.97900390625,461.3080139160156,467.5119934082031,472.2349853515625,479.6409912109375,482.1050109863281,478.0979919433594,475.02301025390625,479.36199951171875,484.3110046386719,493.7130126953125,468.0050048828125,475.69000244140625,479.89300537109375,491.75,495.28900146484375,499.12200927734375,510.89300537109375,533.8040161132812,549.7030029296875,531.6929931640625,515.9600219726562,495.62200927734375,487.37298583984375,487.4580078125,509.3389892578125,487.72100830078125,483.8529968261719,507.052001953125,504.0870056152344,514.073974609375,528.489990234375,555.4439697265625,553.4450073242188,531.3709716796875,497.6440124511719,478.64300537109375,465.8500061035156,462.81500244140625,459.70098876953125,460.67999267578125,459.3139953613281,465.1549987792969,483.6400146484375,492.92999267578125,480.8630065917969,469.72698974609375,459.85198974609375,465.28399658203125,474.3280029296875,481.2869873046875,479.7799987792969,473.4989929199219,465.6090087890625,458.4599914550781,453.7099914550781,454.0299987792969,455.1719970703125,454.7139892578125,456.6520080566406,457.7900085449219,468.6619873046875,473.739990234375,474.0090026855469,482.0369873046875,485.1759948730469,486.47100830078125,487.81298828125,494.88299560546875,488.614990234375,487.77801513671875,469.2969970703125,480.47900390625,492.6260070800781,489.75201416015625,485.2330017089844,498.6650085449219,515.4840087890625,538.85400390625,532.7559814453125,524.9429931640625,505.2309875488281,491.2850036621094,479.5669860839844,490.85699462890625,497.739013671875,480.4360046386719,483.96099853515625,491.0559997558594,514.5280151367188,529.4039916992188,545.4990234375,550.7069702148438,552.6619873046875,527.4010009765625,495.59600830078125,480.8210144042969,466.4330139160156,474.46099853515625,469.5379943847656,468.13800048828125,458.62298583984375,457,476.32501220703125,477.09100341796875,472.385009765625,462.4530029296875,457.6780090332031,460.3659973144531,465.5260009765625,473.0350036621094,470.2619934082031,463.20599365234375,455.9330139160156,453.4859924316406,454.2449951171875,454.7200012207031,455.6860046386719,454.5899963378906,455.4679870605469,458.04901123046875,467.0979919433594,479.32598876953125,479.4549865722656,482.0899963378906,486.38800048828125,488.89599609375,490.8399963378906,497.3599853515625,502.4010009765625,504.2929992675781,477.1510009765625,491.37200927734375,490.33099365234375,478.0570068359375,483.79400634765625,498.7200012207031,516.333984375,559.8579711914062,541.9190063476562,503.9679870605469,499.5830078125,484.0830078125,478.072998046875,482.6510009765625,485.25201416015625,476.3280029296875,483.46600341796875,498.6709899902344,522.47998046875,530.3300170898438,542.4840087890625,550.1389770507812,526.9019775390625,543.3920288085938,506.2120056152344,486.48699951171875,492.2510070800781,483.3290100097656,478.4330139160156,469.35699462890625,457.1180114746094,456.9309997558594,467.96099853515625,468.13299560546875,468.6570129394531,463.8840026855469,457.81201171875,454.58099365234375,458.4490051269531,466.3210144042969,463.7430114746094,453.9309997558594,454.718994140625,452.63800048828125,454.5150146484375,454.6099853515625,453.5159912109375,453.5639953613281,458.7330017089844,465.8489990234375,475.90301513671875,478.3909912109375,478.90301513671875,481.0840148925781,485.2510070800781,487.4179992675781,487.8680114746094,494.9280090332031,499.260009765625,503.40899658203125,478.3160095214844,479.1960144042969,475.260009765625,475.07501220703125,485.68798828125,494.2799987792969,509.2409973144531,532.6389770507812,531.051025390625,508.52801513671875,492.3280029296875,479.9840087890625,473.72601318359375,479.87799072265625,477.2430114746094,472.8810119628906,482.8009948730469,499.9930114746094,515.0419921875,530.2420043945312,573.3250122070312,551.7479858398438,519.2340087890625,528.4340209960938,520.8889770507812,496.8500061035156,486.0570068359375,486.375,484.25299072265625,471.69000244140625,457.7619934082031,456.3500061035156,456.4779968261719,462.60198974609375,469.8290100097656,473.61199951171875,464.406005859375,459.7200012207031,452.63299560546875,459.7820129394531,460.4909973144531,453.2640075683594,452.8590087890625,454.13800048828125,454.6289978027344,454.9010009765625,452.5459899902344,455.0159912109375,462.25299072265625,471.72900390625,474.7330017089844,474.7279968261719,473.4360046386719,476.9649963378906,482.04901123046875,483.2449951171875,480.6510009765625,485.04901123046875,491.2409973144531,498.6960144042969,472.0589904785156,466.75201416015625,465.9389953613281,482.093994140625,497.6619873046875,512.4249877929688,522.3909912109375,522.6079711914062,515.6079711914062,493.9840087890625,482.4219970703125,475.5,472.35699462890625,479.2619934082031,475.47698974609375,469.8240051269531,483.2539978027344,511.4679870605469,500.6159973144531,543.7780151367188,546.4530029296875,530.6510009765625,507.69000244140625,517.89501953125,520.697998046875,496.58599853515625,479.88800048828125,474.635009765625,480.2179870605469,470.89801025390625,457.1579895019531,455.8529968261719,461.4960021972656,464.5050048828125,475.989990234375,473.2130126953125,471.92401123046875,464.6029968261719,451.41400146484375,452.87200927734375,455.0989990234375,454.98199462890625,451.6400146484375,453.6260070800781,452.86199951171875,448.2860107421875,454.7439880371094,455.1180114746094,458.27899169921875,470.35400390625,472.5350036621094,471.2460021972656,466.93701171875,473.4590148925781,476.8699951171875,476.510009765625,479.5320129394531,486.27801513671875,492.5580139160156,490.1659851074219,468.00201416015625,461.60699462890625,470.4930114746094,485.99798583984375,505.8840026855469,523.7379760742188,538.5880126953125,518.5040283203125,510,489.0249938964844,479.197998046875,470.7569885253906,469.4960021972656,478.6889953613281,474.4570007324219,468.8219909667969,484.24700927734375,497.9620056152344,493.69500732421875,530.9240112304688,515.7570190429688,508.2760009765625,495.4309997558594,514.5020141601562,502.3840026855469,492.12799072265625,480.52899169921875,467.19000244140625,468.781005859375,462.9309997558594,456.8059997558594,453.75,453.9159851074219,463.3970031738281,471.4849853515625,462.8059997558594,456.5409851074219,450.93701171875,452.87200927734375,453.2929992675781,453.3590087890625,450.8219909667969,454.35198974609375,453.0159912109375,454.7030029296875,456.1260070800781,455.5979919433594,456.0090026855469,455.2170104980469,462.52801513671875,466.90399169921875,467.9339904785156,461.56201171875,469.04998779296875,472.3999938964844,472.06298828125,478.5780029296875,487.9739990234375,491.6730041503906,480.6289978027344,458.9460144042969,466.14898681640625,477.3659973144531,489.635009765625,502.8210144042969,518.739013671875,544.5399780273438,522.77099609375,506.1000061035156,481.3479919433594,472.6090087890625,466.33599853515625,469.1189880371094,476.1470031738281,470.2070007324219,465.125,479.72198486328125,480.739013671875,489.97698974609375,521.447021484375,511.3349914550781,488.8999938964844,492.5719909667969,528.9110107421875,506.927001953125,490.8500061035156,479.04998779296875,475.7969970703125,464.0150146484375,468.5090026855469,475.2950134277344,463.781005859375,452.6619873046875,452.4309997558594,451.59100341796875,449.7510070800781,451.4530029296875,447.5530090332031,450.72100830078125,451.8080139160156,453.5060119628906,456.2040100097656,454.4079895019531,454.5249938964844,457.2130126953125,458.9070129394531,457.8789978027344,456.3760070800781,456.45098876953125,456.7040100097656,456.98699951171875,457.6619873046875,466.3269958496094,465.3550109863281,465.7900085449219,470.63800048828125,477.26800537109375,484.8190002441406,484.27301025390625,473.4549865722656,458.9289855957031,472.0950012207031,473.4330139160156,497.6820068359375,523.8259887695312,533.8939819335938,510.8030090332031,494.8819885253906,495.2560119628906,479.3240051269531,466.0010070800781,460.989990234375,470.0469970703125,470.89599609375,464.9119873046875,465.5050048828125,471.22100830078125,478.6520080566406,510.5169982910156,505.94500732421875,491.4570007324219,483.65399169921875,491.2550048828125,506.989990234375,495.1340026855469,491.1050109863281,498.2820129394531,492.37200927734375,484.4440002441406,479.0769958496094,477.1719970703125,472.4010009765625,465.1440124511719,459,452.77899169921875,451.4630126953125,451.1440124511719,451.26300048828125,451.9599914550781,452.8789978027344,462.09698486328125,463.96099853515625,459.3630065917969,460.3280029296875,457.40899658203125,460.84100341796875,460.1260070800781,460.4259948730469,456.6520080566406,457.3420104980469,458.0369873046875,458.68798828125,470.67401123046875,471.510986328125,472.1199951171875,472.625,474.7569885253906,476.1340026855469,473.67999267578125,471.6080017089844,459.2439880371094,470.0719909667969,464.0090026855469,477.93499755859375,536.6680297851562,547.0230102539062,502.2669982910156,486.8630065917969,485.0880126953125,472.5060119628906,463.1199951171875,462.1549987792969,469.5329895019531,464.87701416015625,460.3009948730469,473.57501220703125,487.1029968261719,485.1470031738281,487.6860046386719,490.3680114746094,482.73199462890625,466.82598876953125,482.0379943847656,487.7279968261719,473.5559997558594,468.3280029296875,475.1440124511719,471.1109924316406,474.5199890136719,467.8609924316406,470.4570007324219,465.8630065917969,462.3240051269531,458.02099609375,454.343994140625,458.375,450.09600830078125,458.2179870605469,460.03399658203125,459.0679931640625,471.7829895019531,472.6839904785156,471.1080017089844,467.6579895019531,461.59100341796875,460.9800109863281,462.7019958496094,461.19500732421875,457.04901123046875,458.5889892578125,459.39801025390625,464.2909851074219,461.9830017089844,467.4280090332031,464.1759948730469,465.4119873046875,466.7170104980469,468.40899658203125,470.4519958496094,473.4739990234375,461.6180114746094,443.65301513671875,453.1940002441406,481.53900146484375,531.3159790039062,543.9600219726562,500.1969909667969,481.3869934082031,478.35198974609375,463.1709899902344,457.08099365234375,458.79901123046875,459.12200927734375,456.2900085449219,461.9830017089844,477.0379943847656,482.9630126953125,471.3609924316406,473.2650146484375,472.52301025390625,474.0409851074219,463.2799987792969,469.0400085449219,475.6570129394531,469.09100341796875,452.4530029296875,458.3179931640625,457.47698974609375,457.89599609375,459.9320068359375,462.2130126953125,462.72198486328125,458.0849914550781,453.88800048828125,455.0069885253906,458.9219970703125,450.05999755859375,459.8489990234375,466.7950134277344,466.18499755859375,474.0570068359375,479.4670104980469,479.25201416015625,479.95098876953125,470.5589904785156,464.885986328125,463.9859924316406,462.4460144042969,458.7539978027344,459.218994140625,460.0780029296875,460.74798583984375,464.86700439453125,463.6919860839844,467.760009765625,469.2850036621094,470.9540100097656,471.385986328125,477.59698486328125,478.3489990234375,479.1919860839844,460.97601318359375,443.1099853515625,468.8949890136719,517.0130004882812,549.06201171875,503.1310119628906,482.43499755859375,470.375,464.9909973144531,457.5660095214844,451.47100830078125,457.8190002441406,460.114013671875,463.05999755859375,462.7040100097656,469.4800109863281,463.09698486328125,460.6419982910156,462.7300109863281,461.739013671875,455.17999267578125,459.46099853515625,472.6659851074219,467.9739990234375,446.8370056152344,446.7430114746094,447.6960144042969,448.1289978027344,445.9150085449219,457.7279968261719,458.3399963378906,455.37799072265625,451.1109924316406,454.3219909667969,451.6199951171875,457.9549865722656,475.7340087890625,479.072998046875,479.3949890136719,478.1310119628906,484.8599853515625,487.27398681640625,481.6579895019531,473.8169860839844,470.8389892578125,468.1029968261719,463.468994140625,461.2829895019531,460.5889892578125,460.1090087890625,460.97601318359375,460.9800109863281,463.4599914550781,469.5429992675781,470.1310119628906,471.0379943847656,471.8550109863281,474.4020080566406,474.1709899902344,475.4179992675781,458.9960021972656,441.3349914550781,463.1709899902344,492.25299072265625,513.2440185546875,490.31298828125,476.7900085449219,465.11199951171875,459.77099609375,454.7569885253906,453.5419921875,470.9739990234375,464.14300537109375,454.8599853515625,450.04998779296875,455.6650085449219,462.2080078125,449.55499267578125,453.7900085449219,462.197998046875,453.48199462890625,458.55499267578125,466.7030029296875,466.56201171875,446.8219909667969,449.0150146484375,449.17999267578125,449.7860107421875,445.9389953613281,449.3489990234375,455.468994140625,456.5570068359375,450.70098876953125,446.6210021972656,450.5679931640625,466.4739990234375,484.3089904785156,493.4949951171875,491.78900146484375,492.3760070800781,490.010009765625,491.40899658203125,483.3659973144531,487.7380065917969,475.9209899902344,471.0570068359375,466.38299560546875,464.656005859375,466.4460144042969,462.3680114746094,462.3500061035156,461.57000732421875,464.0010070800781,465.20599365234375,469.97198486328125,470.6820068359375,469.95001220703125,471.52099609375,470.1409912109375,475.6449890136719,484.0799865722656,464.07000732421875,438.65899658203125,488.59600830078125,472.7569885253906,475.9410095214844,466.8320007324219,459.81201171875,452.14599609375,448.9119873046875,456.4330139160156,471.7309875488281,463.1050109863281,452.3869934082031,444.1090087890625,444.3840026855469,446.23699951171875,445.19000244140625,448.08099365234375,453.8919982910156,453.4580078125,455.39599609375,456.3590087890625,458.5530090332031,452.8630065917969,447.4639892578125,449.7120056152344,453.5979919433594,455.42401123046875,444.322998046875,449.82000732421875,451.4309997558594,447.885986328125,454.5559997558594,462.9209899902344,460.3940124511719,481.2309875488281,492.26300048828125,498.2359924316406,503.56500244140625,503.4670104980469,500.89599609375,497.8269958496094,487.4880065917969,479.8559875488281,477.6600036621094,471.65899658203125,471.3059997558594,470.97900390625,473.4930114746094,468.96099853515625,466.4200134277344,460.27398681640625,465.5429992675781,466.5039978027344,467.49700927734375,467.91900634765625,469.2070007324219,469.4809875488281,513.468017578125,541.8709716796875,483.5329895019531,447.4320068359375,457.6159973144531,465.6159973144531,461.2900085449219,456.0150146484375,451.2139892578125,444.7409973144531,450.2619934082031,457.9739990234375,471.5169982910156,463.06500244140625,449.7090148925781,443.614013671875,443.7040100097656,443.9530029296875,444.27899169921875,444.3949890136719,444.6679992675781,445.42498779296875,446.00201416015625,446.7099914550781,456.4649963378906,453.60198974609375,447.9179992675781,447.85101318359375,449.82000732421875,460.0989990234375,474.0090026855469,456.6390075683594,450.3890075683594,450.2770080566406,470.7279968261719,483.20098876953125,488.3340148925781,469.614990234375,475.5790100097656,487.8070068359375,509.114990234375,519.2739868164062,519.5250244140625,501.7770080566406,491.29901123046875,492.0840148925781,490.3089904785156,490.6719970703125,488.697998046875,485.5509948730469,483.2720031738281,475.3280029296875,465.89801025390625,464.4339904785156,463.9410095214844,466.677001953125,466.33099365234375,467.6340026855469,468.5039978027344,469.6159973144531,566.2999877929688,571.5449829101562,493.9620056152344,452.4909973144531,444.5589904785156,444.44000244140625,448.510986328125,450.4849853515625,442.8039855957031,449.2749938964844,450.5710144042969,460.15301513671875,463.7019958496094,444.46099853515625,443.35101318359375,443.7300109863281,444.4530029296875,444.8949890136719,445.447998046875,444.17401123046875,445.5069885253906,445.9469909667969,446.03900146484375,446.375,444.9259948730469,453.12701416015625,448.0880126953125,447.6000061035156,448.7860107421875,460.4010009765625,472.61700439453125,490.9840087890625,480.8900146484375,455.2430114746094,461.7850036621094,484.7850036621094,503.0880126953125,486.4219970703125,490.0429992675781,492.6759948730469,518.3679809570312,543.72998046875,541.7310180664062,518.5540161132812,509.156005859375,498.8219909667969,519.5689697265625,529.4739990234375,519.385986328125,502.94500732421875,492.6820068359375,481.968994140625,474.5559997558594,471.68701171875,468.3840026855469,466.114990234375,466.4259948730469,467.3599853515625,468.5159912109375,470.04400634765625,502.2850036621094,502.114013671875,472.4519958496094,457.3089904785156,453.9670104980469,440.57000732421875,442.9159851074219,441.6669921875,445.89898681640625,451.1929931640625,460.1059875488281,462.1839904785156,445.1830139160156,442.9590148925781,443.0740051269531,443.17401123046875,442.2959899902344,444.343994140625,444.9460144042969,444.76800537109375,445.8370056152344,448.0849914550781,450.64801025390625,447.32598876953125,445.9849853515625,448.1300048828125,447.3900146484375,447.3489990234375,469.9490051269531,486.8800048828125,492.43798828125,491.1929931640625,484.531005859375,475.9540100097656,475.385986328125,495.64801025390625,505.81298828125,509.1080017089844,505.3919982910156,508.052001953125,518.9099731445312,544.7680053710938,581.6699829101562,561.5549926757812,537.9249877929688,512.0440063476562,521.9730224609375,551.4650268554688,558.6389770507812,523.0020141601562,507.83099365234375,493.7080078125,493.5559997558594,482.6929931640625,474.8380126953125,469.1189880371094,468.5539855957031,469.58599853515625,469.447998046875,468.1050109863281,493.22198486328125,477.5199890136719,471.8699951171875,456.0830078125,471.4830017089844,446.43798828125,443.0060119628906,441.1610107421875,447.7040100097656,458.7909851074219,465.9429931640625,458.6679992675781,444.5929870605469,443.77398681640625,443.6099853515625,443.45599365234375,443.1730041503906,443.072998046875,444.89801025390625,455.7550048828125,451.9209899902344,457.59100341796875,480.1619873046875,485.7409973144531,446.29998779296875,447.67498779296875,446.2659912109375,478.3479919433594,509.989990234375,506.32501220703125,490.85400390625,482.4679870605469,482.3320007324219,488.0409851074219,486.6610107421875,490.9639892578125,499.27899169921875,501.2040100097656,495.5580139160156,513.64697265625,528.9639892578125,559.0449829101562,607.343017578125,611.14599609375,572.375,531.7659912109375,532.2849731445312,573.75,605.1079711914062,563.0009765625,533.0349731445312,521.1500244140625,498.7340087890625,504.2869873046875,486.82598876953125,481.0329895019531,473.9020080566406,474.6600036621094,473.5669860839844,471.32000732421875,483.4670104980469,476.72900390625,470.5880126953125,462.0350036621094,457.3290100097656,446.1910095214844,441.010986328125,438.8550109863281,454.22601318359375,464.03900146484375,457.9280090332031,464.8999938964844,444.2720031738281,442.8919982910156,443.1109924316406,442.5010070800781,444.6310119628906,446.2250061035156,448.2860107421875,451.2080078125,454.864013671875,462.0989990234375,476.9169921875,476.3869934082031,460.1090087890625,440.625,453.6239929199219,458.6510009765625,476.02099609375,480.4079895019531,473.64599609375,473.2749938964844,469.4570007324219,474.6839904785156,476.6659851074219,481.5069885253906,483.9909973144531,481.2070007324219,492.75799560546875,498.0069885253906,520.31201171875,542.635009765625,576.041015625,607.072021484375,600.4110107421875,563.3259887695312,541.9630126953125,553.9199829101562,608.3629760742188,620.2310180664062,556.43701171875,524.572021484375,533.969970703125,540.093994140625,501.89801025390625,502.072998046875,500.4070129394531,481.52301025390625,492.82501220703125,487.60198974609375,471.85198974609375,467.83599853515625,464.5840148925781,456.4150085449219,457.2489929199219,444.02301025390625,440.7699890136719,442.77899169921875,449.02801513671875,455.26300048828125,455.1390075683594,461.8320007324219,442.5920104980469,442.5050048828125,442.7130126953125,443.2720031738281,445.0169982910156,446.7090148925781,448.1189880371094,449.0790100097656,450.3529968261719,451.8489990234375,454.24798583984375,455.61700439453125,456.88800048828125,457.93701171875,448.1960144042969,453.072998046875,451.8800048828125,453.9100036621094,461.427001953125,466.8340148925781,464.78399658203125,462.23699951171875,465.75799560546875,472.5270080566406,471.8999938964844,480.82598876953125,480.65899658203125,498.3529968261719,509.885009765625,519.0809936523438,533.60302734375,541.0360107421875,558.4949951171875,583.5789794921875,577.072021484375,581.8289794921875,611.6810302734375,623.2269897460938,556.1829833984375,565.7509765625,579.5609741210938,541.7069702148438,521.2890014648438,527.114990234375,511.2799987792969,488.052001953125,507.2980041503906,490.9779968261719,468.5320129394531,457.8240051269531,455.6099853515625,457.2179870605469,438.8949890136719,439.1310119628906,440.6679992675781,441.9339904785156,443.2569885253906,445.8489990234375,450.8450012207031,445.2229919433594,442.2080078125,442.3380126953125,442.906005859375,442.8389892578125,444.6520080566406,446.7340087890625,447.8580017089844,449.3210144042969,450.3949890136719,452.885986328125,454.37701416015625,456.2869873046875,458.8869934082031,465.6960144042969,492.3429870605469,469.2019958496094,484.49798583984375,475.17401123046875,459.5589904785156,459.6990051269531,462.31298828125,466.25299072265625,469.6929931640625,465.42401123046875,465.3349914550781,470.1340026855469,478.2380065917969,490.6499938964844,498.9620056152344,505.781005859375,511.6600036621094,517.9710083007812,534.9030151367188,544.3839721679688,540.9910278320312,547.81201171875,587.02099609375,619.6929931640625,626.322021484375,629.1320190429688,622.7550048828125,562.5449829101562,553.416015625,519.7379760742188,506.10400390625,502.8529968261719,515.5170288085938,499.1260070800781,479.5880126953125,460.55999755859375,449.6789855957031,450.1919860839844,438.3940124511719,439.1260070800781,441.1809997558594,441.7489929199219,440.61199951171875,441.7250061035156,443.85101318359375,441.0039978027344,441.2409973144531,442.2919921875,441.5830078125,443.4429931640625,444.0249938964844,445.7340087890625,448.27301025390625,458.52398681640625,468.5899963378906,487.6499938964844,472.6400146484375,472.52899169921875,496.9809875488281,493.8949890136719,509.78900146484375,494.6929931640625,491.7640075683594,475.5950012207031,467.4930114746094,487.8210144042969,482.9209899902344,500.38299560546875,488.1780090332031,477.14801025390625,472.8800048828125,468.42999267578125,472.2959899902344,477.3970031738281,487.4150085449219,494.0950012207031,496.4330139160156,511.32501220703125,514.8779907226562,521.989013671875,519.9190063476562,532.8870239257812,546.8289794921875,578.666015625,612.8250122070312,628.1290283203125,616.7449951171875,627.5159912109375,565.166015625,547.2849731445312,531.1209716796875,513.6179809570312,522.0150146484375,518.989013671875,463.1099853515625,459.8009948730469,450.52398681640625,450.52099609375,438.4200134277344,439.46099853515625,439.94000244140625,439.9540100097656,440.73199462890625,440.66900634765625,440.6310119628906,441.22601318359375,441.5669860839844,442.1679992675781,437.9800109863281,443.2040100097656,445.7430114746094,456.2980041503906,477.1029968261719,515.6510009765625,537.0269775390625,553.572998046875,513.9949951171875,524.1900024414062,541.0579833984375,545.6339721679688,526.9249877929688,503.46600341796875,491.2080078125,488.3909912109375,485.0140075683594,484.26800537109375,504.88800048828125,513.2849731445312,499.6289978027344,485.0830078125,478.5679931640625,475.2460021972656,472.11700439453125,473.6860046386719,477.3819885253906,483.0530090332031,488.0769958496094,497.8710021972656,501.79998779296875,501.36700439453125,504.96600341796875,516.3400268554688,528.823974609375,549.52001953125,569.3930053710938,586.2479858398438,567.052978515625,576.6649780273438,592.0369873046875,593.739990234375,545.9940185546875,529.3829956054688,542.6179809570312,535.3770141601562,448.7919921875,455.677001953125,444.7860107421875,435.6570129394531,438.7919921875,438.70001220703125,438.875,439.6189880371094,439.8999938964844,439.8169860839844,440.22601318359375,440.80499267578125,440.9939880371094,441.5790100097656,441.822998046875,446.6050109863281,464.5849914550781,487.51300048828125,487.54901123046875,493.1700134277344,489.8269958496094,527.7630004882812,543.6320190429688,541.8590087890625,519.822998046875,524.0679931640625,540.2979736328125,530.5380249023438,520.655029296875,505.0190124511719,495.1180114746094,501.2200012207031,490.1709899902344,515.47802734375,505.6289978027344,492.2040100097656,491.8110046386719,489.4649963378906,474.7720031738281,475.17999267578125,475.1610107421875,481.14300537109375,487.1610107421875,490.5889892578125,492.8919982910156,491.57000732421875,505.45098876953125,502.6470031738281,512.9130249023438,529.8870239257812,551.906005859375,563.7550048828125,545.719970703125,548.3049926757812,557.0579833984375,575.9320068359375,570.22900390625,556.4849853515625,562.7769775390625,534.1530151367188,442.2359924316406,447.3420104980469,437.5570068359375,437.7850036621094,437.58099365234375,437.74798583984375,437.67498779296875,440.3429870605469,439.6260070800781,439.3840026855469,439.7969970703125,440.42999267578125,440.98699951171875,440.72698974609375,441.6960144042969,443.6520080566406,454.1839904785156,462.5830078125,461.0150146484375,469.4110107421875,477.4230041503906,499.36199951171875,511.5719909667969,536.47998046875,507.4129943847656,518.1610107421875,533.5250244140625,522.72900390625,525.1119995117188,519.530029296875,517.218994140625,524.6920166015625,509.2879943847656,507.94500732421875,509.3500061035156,522.2639770507812,522.4769897460938,527.260986328125,495.8169860839844,486.5769958496094,484.62799072265625,477.60400390625,478.6809997558594,481.39801025390625,481.82000732421875,485.3680114746094,492.12701416015625,504.86700439453125,521.7109985351562,534.781982421875,546.0449829101562,541.4559936523438,526.7410278320312,532.9299926757812,558.718017578125,578.072021484375,595.177001953125,592.9130249023438,572.7059936523438,541.1019897460938,437.4219970703125,433.843994140625,436.41900634765625,437.4800109863281,438.20098876953125,438.0769958496094,439.54901123046875,438.6759948730469,439.69500732421875,439.63800048828125,439.8269958496094,440.25,440.2300109863281,441.0090026855469,441.4750061035156,440.49798583984375,444.34100341796875,448.31500244140625,459.5320129394531,489.7139892578125,505.7539978027344,522.7750244140625,524.4099731445312,522.4340209960938,493.9460144042969,506.9930114746094,505.0660095214844,506.3070068359375,514.0059814453125,522.2570190429688,533.4879760742188,548.1229858398438,529.3809814453125,518.1240234375,524.4569702148438,541.2449951171875,578.625,583.375,539.27001953125,505.4530029296875,505.0989990234375,495.20599365234375,485.5299987792969,486.7959899902344,485.2510070800781,483.86199951171875,484.8590087890625,491.4309997558594,494.79998779296875,507.44500732421875,522.2230224609375,513.0180053710938,520.4769897460938,540.4749755859375,566.2420043945312,581.7340087890625,581.031005859375,568.677978515625,562.010009765625,544.4569702148438,437.04998779296875,436.9580078125,437.2799987792969,435.3970031738281,437.65301513671875,438.1470031738281,438.9110107421875,439.75201416015625,439.4159851074219,439.8680114746094,439.72100830078125,440.4339904785156,440.20098876953125,441.6080017089844,445.54901123046875,448.3609924316406,450.072998046875,444.42498779296875,451.5140075683594,466.8370056152344,484.16900634765625,496.9549865722656,492.80999755859375,492.5159912109375,481.7300109863281,490.9620056152344,491.10101318359375,502.0570068359375,511.8039855957031,518.3889770507812,522.9550170898438,533.6690063476562,525.9970092773438,543.2890014648438,550.916015625,546.3599853515625,555.8300170898438,579.0449829101562,579.4630126953125,521.6300048828125,538.8380126953125,538.0499877929688,507.4670104980469,502.5979919433594,494.7120056152344,490.34698486328125,486.0320129394531,487.6520080566406,488.9280090332031,492.9289855957031,507.0610046386719,508.89898681640625,524.916015625,542.802978515625,556.8270263671875,562.843994140625,560.5349731445312,554.47900390625,549.927001953125,560.7459716796875,436.89801025390625,435.989990234375,437.35400390625,438.0060119628906,438.3580017089844,438.8810119628906,438.6759948730469,439.2770080566406,439.3689880371094,439.9010009765625,440.35198974609375,440.5469970703125,441.0920104980469,444.8999938964844,449.30499267578125,454.8869934082031,461.7090148925781,460.114990234375,451.7650146484375,455.177001953125,456.9809875488281,467.2489929199219,463.9949951171875,467.8970031738281,484.4700012207031,498.2430114746094,504.6520080566406,520.2379760742188,530.5029907226562,547.8060302734375,546.0640258789062,538.3660278320312,545.5330200195312,562.5009765625,592.7340087890625,591.1209716796875,593.7349853515625,601.864990234375,584.406005859375,554.2369995117188,587.427978515625,540.52099609375,518.3309936523438,518.8049926757812,506.7550048828125,495.92498779296875,490.3059997558594,490.364990234375,490.135986328125,493.8580017089844,497.0010070800781,509.1789855957031,520.6279907226562,533.7260131835938,538.9769897460938,550.5330200195312,545.5449829101562,541.8599853515625,541.2949829101562,557.3419799804688,436.197998046875,436.2149963378906,436.7829895019531,437.0220031738281,438.0450134277344,438.71099853515625,439.1180114746094,438.9289855957031,439.8599853515625,439.46099853515625,438.8179931640625,439.8030090332031,447.9100036621094,454.0679931640625,455.2659912109375,462.6180114746094,472.98699951171875,484.3919982910156,469.3630065917969,461.7179870605469,463.3429870605469,464.427001953125,475.8970031738281,493.89599609375,509.58599853515625,517.47900390625,522.4039916992188,523.5650024414062,536.7839965820312,551.4409790039062,546.9140014648438,535.2639770507812,560.7960205078125,578.406982421875,581.1829833984375,591.3709716796875,637.9439697265625,625.416015625,590.14697265625,598.6279907226562,587.333984375,576.0070190429688,559.3179931640625,538.2659912109375,516.0499877929688,514.7789916992188,503.4110107421875,496.63299560546875,496.61700439453125,493.8389892578125,495.48199462890625,500.802001953125,512.0239868164062,524.2979736328125,529.072021484375,537.4210205078125,533.27099609375,528.0609741210938,549.3939819335938,569.35498046875,436.31500244140625,436.6289978027344,437.1940002441406,437.2070007324219,437.4410095214844,437.21600341796875,450.4150085449219,439.7239990234375,439.63800048828125,450.14801025390625,447.281005859375,439.5880126953125,442.6610107421875,451.10101318359375,460.89898681640625,467.30999755859375,477.00799560546875,497.7279968261719,521.010986328125,495.3429870605469,483.5429992675781,476.58099365234375,473.8500061035156,471.2669982910156,483.0929870605469,495.3599853515625,506.9469909667969,510.40399169921875,514.458984375,515.3070068359375,518.1309814453125,523.5919799804688,556.2869873046875,558.458984375,553.583984375,580.3619995117188,605.802001953125,601.8779907226562,611.2639770507812,608.822021484375,630.9320068359375,592.6500244140625,583.6380004882812,543.375,543.22900390625,552.6480102539062,533.531005859375,511.7049865722656,502.3169860839844,496.4949951171875,495.7300109863281,501.61700439453125,509.1449890136719,515.5490112304688,520.323974609375,522.7630004882812,519.1430053710938,534.593017578125,561.6510009765625,580.25,436.7300109863281,436.9779968261719,437.1050109863281,437.4570007324219,438.0710144042969,439.56298828125,455.92401123046875,464.85198974609375,466.5299987792969,464.63299560546875,454.2040100097656,446.58099365234375,449.8169860839844,450.718994140625,457.6260070800781,468.3479919433594,481.7200012207031,511.7950134277344,505.98199462890625,515.3619995117188,518.4559936523438,511.1189880371094,500.2229919433594,494.468994140625,480.0299987792969,482.1050109863281,490.10101318359375,491.9230041503906,495.7460021972656,500.07000732421875,508.3399963378906,515.7349853515625,528.802001953125,534.927001953125,556.8400268554688,582.4920043945312,581.9110107421875,579.97998046875,588.7860107421875,580.9210205078125,583.1409912109375,567.6129760742188,547.239990234375,552.9660034179688,560.7780151367188,567.9920043945312,543.531005859375,522.426025390625,514.8189697265625,504.0360107421875,497.1090087890625,497.625,504.33599853515625,509.4830017089844,507.739990234375,510.4830017089844,517.68701171875,532.27099609375,550.1439819335938,552.8200073242188,437.44500732421875,437.0780029296875,451.8789978027344,455.1260070800781,450.125,459.7080078125,456.87200927734375,461.0260009765625,462.1000061035156,463.760986328125,458.61700439453125,454.5769958496094,455.1549987792969,454.6310119628906,453.4739990234375,463.4540100097656,472.84100341796875,480.447998046875,486.2850036621094,490.4219970703125,502.10400390625,517.0789794921875,522.9000244140625,521.6069946289062,504.13800048828125,497.9010009765625,498.1910095214844,499.8420104980469,509.59600830078125,511.9219970703125,516.5479736328125,530.9089965820312,537.2260131835938,538.5750122070312,546.8079833984375,556.02099609375,570.8079833984375,581.7860107421875,582.8709716796875,557.18701171875,551.2880249023438,541.89697265625,529.1129760742188,539.8079833984375,563.6270141601562,578.8820190429688,557.6589965820312,551.0189819335938,536.4749755859375,539.0079956054688,511.6780090332031,499.4530029296875,500.0320129394531,501.9530029296875,504.6130065917969,505.3599853515625,514.5989990234375,522.4359741210938,534.594970703125,549.5070190429688,438.3919982910156,439.4469909667969,461.5679931640625,467.8009948730469,462.9670104980469,456.6310119628906,453.2550048828125,453.9469909667969,455.0690002441406,456.1210021972656,455.2699890136719,461.739990234375,463.96099853515625,463.78399658203125,463.92498779296875,463.34100341796875,465.8290100097656,473.92999267578125,490.00799560546875,510.906005859375,515.1110229492188,514.718994140625,517.7969970703125,512.9639892578125,507.6570129394531,506.20001220703125,508.75,517.4559936523438,521.4609985351562,532.2449951171875,534.3699951171875,539.2239990234375,562.1060180664062,557.4580078125,565.3060302734375,582.0889892578125,576.3389892578125,562.1959838867188,574.3599853515625,560.6329956054688,545.8870239257812,530.427001953125,518.35302734375,523.739013671875,548.1229858398438,570.1010131835938,573.6939697265625,573.2020263671875,556.3350219726562,550.4459838867188,535.14501953125,509.0559997558594,502.1600036621094,503.6700134277344,504.9739990234375,506.2799987792969,507.6719970703125,516.2169799804688,530.302978515625,533.2730102539062,439.0459899902344,446.46600341796875,450.93701171875,451.0190124511719,450.8030090332031,444.07598876953125,444.20599365234375,448.1080017089844,450.71099853515625,450.3659973144531,453.62298583984375,458.29400634765625,463.1130065917969,479.8630065917969,479.60699462890625,477.6940002441406,473.885009765625,480.1579895019531,513.0020141601562,530.3599853515625,528.1599731445312,530.9340209960938,521.0490112304688,505.7040100097656,492.39898681640625,501.9110107421875,511.83599853515625,524.052001953125,531.3980102539062,549.3389892578125,556.0360107421875,551.0819702148438,568.2249755859375,557.1690063476562,573.3690185546875,566.7969970703125,549.2269897460938,545.6060180664062,574.7899780273438,556.9760131835938,544.5700073242188,543.2069702148438,523.0830078125,512.5819702148438,534.9099731445312,550.85498046875,551.3380126953125,570.6920166015625,576.5419921875,555.927001953125,540.125,524.0960083007812,509.0710144042969,505.23699951171875,507.1809997558594,508.26300048828125,509.8710021972656,509.77301025390625,519.8690185546875,526.9439697265625,439.6669921875,440.1400146484375,440.82501220703125,441.6910095214844,442.4320068359375,442.9259948730469,443.4840087890625,444.3500061035156,444.62200927734375,445.6809997558594,445.8699951171875,445.9169921875,461.156005859375,476.2909851074219,484.8550109863281,499.2330017089844,488.8030090332031,495.28399658203125,504.8039855957031,527.93798828125,518.7369995117188,508.4100036621094,514.9559936523438,498.6510009765625,488.8139953613281,509.24700927734375,518.4249877929688,512.3140258789062,530.7219848632812,546.0549926757812,560.4459838867188,552.9390258789062,552.0289916992188,538.1209716796875,560.1160278320312,559.3989868164062,537.6749877929688,534.2589721679688,547.7760009765625,539.1069946289062,530.9359741210938,537.0759887695312,523.7160034179688,498.66400146484375,515.4920043945312,522.6710205078125,535.760009765625,553.5460205078125,572.6840209960938,561.4650268554688,543.2579956054688,535.89599609375,520.989990234375,510.30499267578125,508.7090148925781,509.8869934082031,511.0660095214844,512.4429931640625,514.1489868164062,515.9030151367188,439.40899658203125,439.8739929199219,440.17401123046875,441.2869873046875,442.0989990234375,442.864990234375,443.48699951171875,444.8039855957031,445.1419982910156,445.82501220703125,445.4909973144531,446.20599365234375,451.9110107421875,463.22601318359375,462.1910095214844,467.510986328125,477.4639892578125,506.9570007324219,521.5759887695312,517.2999877929688,512.4979858398438,492.0989990234375,496.6549987792969,484.60699462890625,486.01800537109375,521.677978515625,509.6719970703125,499.9590148925781,518.3829956054688,547.8209838867188,544.7680053710938,531.4530029296875,530.22802734375,520.4190063476562,536.8049926757812,538.7030029296875,517.7789916992188,521.7030029296875,525.2219848632812,520.5280151367188,514.7969970703125,526.8359985351562,510.71099853515625,494.052001953125,497.88299560546875,509.510986328125,532.1409912109375,553.56201171875,555.697998046875,558.9110107421875,550.89697265625,543.3519897460938,531.0419921875,518.6959838867188,511.5369873046875,510.10400390625,514.125,512.5050048828125,515.77197265625,515.7239990234375,438.8659973144531,439.4779968261719,440.1260070800781,441.1409912109375,442.12701416015625,443.0950012207031,443.89300537109375,443.9079895019531,444.48699951171875,444.8599853515625,445.9049987792969,446.3999938964844,447.65301513671875,447.6659851074219,448.3179931640625,449.09600830078125,473.0769958496094,498.5010070800781,500.87298583984375,497.91400146484375,494.47100830078125,481.8059997558594,481.281005859375,475.02301025390625,483.3219909667969,508.71600341796875,504.51800537109375,491.7030029296875,518.2620239257812,528.7000122070312,525.43701171875,516.3829956054688,512.6259765625,509.4440002441406,511.83099365234375,509.5690002441406,498.59100341796875,505.4800109863281,505.260986328125,504.54901123046875,499.1449890136719,508.7380065917969,497.3559875488281,488.65301513671875,491.7099914550781,510.0929870605469,531.7490234375,533.9180297851562,541.3590087890625,548.7269897460938,547.9600219726562,546.155029296875,541.385009765625,538.7789916992188,520.427001953125,517.0029907226562,519.2000122070312,516.7659912109375,519.823974609375,517.781005859375,439.23199462890625,439.7699890136719,440.739013671875,441.29998779296875,442.1820068359375,443.0299987792969,443.4880065917969,437.2760009765625,443.2449951171875,443.96099853515625,444.6709899902344,446.5580139160156,447.6700134277344,448.5480041503906,449.54400634765625,451.9289855957031,462.0880126953125,478.00799560546875,481.9070129394531,479.58099365234375,479.5639953613281,473.9200134277344,469.82598876953125,470.1260070800781,485.40899658203125,499.2330017089844,500.9100036621094,482.61199951171875,502.04400634765625,506.822998046875,509.00299072265625,505.6919860839844,500.03900146484375,500.1189880371094,495.30499267578125,486.4530029296875,492.5920104980469,496.010986328125,492.031005859375,494.3330078125,490.3609924316406,499.70098876953125,492.09600830078125,482.4960021972656,493.4880065917969,516.0499877929688,512.5170288085938,514.156005859375,537.56298828125,547.302001953125,536.677001953125,539.5859985351562,537.5889892578125,539.3070068359375,527.5390014648438,531.2529907226562,524.5180053710938,521.8099975585938,527.6810302734375,518.9030151367188],"width":60,"height":60,"bottomLeft":[151.91746692165233,-28.320328645752156],"topRight":[152.13265856029523,-28.130383044208173],"timestamp":"2025-12-07T05:27:29.679Z"};

// Scene setup
let scene, camera, renderer, terrain, waterMesh, riverMesh;
let simulation = null;
let isRunning = false;

const width = WARWICK_DATA.width;
const height = WARWICK_DATA.height;
const elevations = WARWICK_DATA.elevationData;
const scale = 10;
const terrainScale = 0.15;

init();
animate();

function init() {
    scene = new THREE.Scene();
    scene.background = new THREE.Color(0x87CEEB);
    
    camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 10000);
    camera.position.set(300, 200, 300);
    camera.lookAt(0, 0, 0);
    
    renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.getElementById('viewer').appendChild(renderer.domElement);
    
    // Lighting
    const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
    scene.add(ambientLight);
    const dirLight = new THREE.DirectionalLight(0xffffff, 0.8);
    dirLight.position.set(100, 200, 100);
    scene.add(dirLight);
    
    createTerrain();
    createWaterMesh();
    
    // Controls
    window.addEventListener('resize', onWindowResize);
    setupUI();
}

function createTerrain() {
    const geometry = new THREE.PlaneGeometry(width * scale, height * scale, width - 1, height - 1);
    const positions = geometry.attributes.position.array;
    
    for (let i = 0; i < height; i++) {
        for (let j = 0; j < width; j++) {
            const idx = i * width + j;
            const vertIdx = (i * width + j) * 3;
            positions[vertIdx + 2] = (elevations[idx] - 500) * terrainScale;
        }
    }
    
    geometry.computeVertexNormals();
    
    const material = new THREE.MeshPhongMaterial({
        color: 0x8B7355,
        flatShading: false,
        side: THREE.DoubleSide
    });
    
    terrain = new THREE.Mesh(geometry, material);
    terrain.rotation.x = -Math.PI / 2;
    scene.add(terrain);
}

function createWaterMesh() {
    const geometry = new THREE.PlaneGeometry(width * scale, height * scale, width - 1, height - 1);
    const colors = new Float32Array(width * height * 3);
    geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
    
    const material = new THREE.MeshPhongMaterial({
        vertexColors: true,
        transparent: true,
        opacity: 0.7,
        side: THREE.DoubleSide,
        shininess: 100
    });
    
    waterMesh = new THREE.Mesh(geometry, material);
    waterMesh.rotation.x = -Math.PI / 2;
    waterMesh.visible = false;
    scene.add(waterMesh);
}

function detectRivers() {
    const rivers = new Set();
    const flowAccumulation = new Array(width * height).fill(0);
    
    // Calculate flow accumulation (simple downstream flow)
    for (let y = 0; y < height; y++) {
        for (let x = 0; x < width; x++) {
            const idx = y * width + x;
            const elev = elevations[idx];
            
            // Find lowest neighbor
            let lowestElev = elev;
            let lowestIdx = -1;
            
            const neighbors = [[x-1,y], [x+1,y], [x,y-1], [x,y+1]];
            for (const [nx, ny] of neighbors) {
                if (nx >= 0 && nx < width && ny >= 0 && ny < height) {
                    const nIdx = ny * width + nx;
                    if (elevations[nIdx] < lowestElev) {
                        lowestElev = elevations[nIdx];
                        lowestIdx = nIdx;
                    }
                }
            }
            
            if (lowestIdx >= 0) {
                flowAccumulation[lowestIdx] += flowAccumulation[idx] + 1;
            }
        }
    }
    
    // Mark high-flow cells as rivers
    const threshold = Math.max(30, width * height * 0.01);
    for (let i = 0; i < flowAccumulation.length; i++) {
        if (flowAccumulation[i] > threshold) {
            rivers.add(i);
        }
    }
    
    // Add edge cells as exit points
    for (let x = 0; x < width; x++) {
        rivers.add(x); // Top edge
        rivers.add((height - 1) * width + x); // Bottom edge
    }
    for (let y = 0; y < height; y++) {
        rivers.add(y * width); // Left edge
        rivers.add(y * width + (width - 1)); // Right edge
    }
    
    return rivers;
}

function showRivers() {
    if (riverMesh) {
        scene.remove(riverMesh);
        riverMesh = null;
        document.getElementById('toggleRivers').textContent = 'Show Rivers';
        return;
    }
    
    const rivers = simulation ? simulation.rivers : detectRivers();
    const geometry = new THREE.BufferGeometry();
    const positions = [];
    const colors = [];
    
    for (const idx of rivers) {
        const x = idx % width;
        const y = Math.floor(idx / width);
        const z = (elevations[idx] - 500) * terrainScale;
        
        positions.push(
            (x - width / 2) * scale,
            z + 0.5,
            (y - height / 2) * scale
        );
        colors.push(0, 0.5, 1);
    }
    
    geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
    geometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));
    
    const material = new THREE.PointsMaterial({ size: 2, vertexColors: true });
    riverMesh = new THREE.Points(geometry, material);
    scene.add(riverMesh);
    
    document.getElementById('toggleRivers').textContent = 'Hide Rivers';
}

function setupUI() {
    const rainfallSlider = document.getElementById('rainfall');
    const durationSlider = document.getElementById('duration');
    const drainageSlider = document.getElementById('drainage');
    const speedSlider = document.getElementById('speed');
    
    rainfallSlider.oninput = () => document.getElementById('rainfallVal').textContent = rainfallSlider.value;
    durationSlider.oninput = () => document.getElementById('durationVal').textContent = durationSlider.value;
    drainageSlider.oninput = () => document.getElementById('drainageVal').textContent = drainageSlider.value;
    speedSlider.oninput = () => document.getElementById('speedVal').textContent = speedSlider.value;
    
    document.getElementById('startBtn').onclick = startSimulation;
    document.getElementById('pauseBtn').onclick = pauseSimulation;
    document.getElementById('resetBtn').onclick = resetSimulation;
    document.getElementById('toggleRivers').onclick = showRivers;
    document.getElementById('resetView').onclick = () => {
        camera.position.set(300, 200, 300);
        camera.lookAt(0, 0, 0);
    };
    
    // Mouse controls
    let isDragging = false;
    let previousMousePosition = { x: 0, y: 0 };
    
    renderer.domElement.addEventListener('mousedown', (e) => {
        isDragging = true;
        previousMousePosition = { x: e.clientX, y: e.clientY };
    });
    
    renderer.domElement.addEventListener('mousemove', (e) => {
        if (!isDragging) return;
        
        const deltaX = e.clientX - previousMousePosition.x;
        const deltaY = e.clientY - previousMousePosition.y;
        
        const radius = camera.position.length();
        const theta = Math.atan2(camera.position.x, camera.position.z);
        const phi = Math.acos(camera.position.y / radius);
        
        const newTheta = theta - deltaX * 0.01;
        const newPhi = Math.max(0.1, Math.min(Math.PI - 0.1, phi + deltaY * 0.01));
        
        camera.position.x = radius * Math.sin(newPhi) * Math.sin(newTheta);
        camera.position.y = radius * Math.cos(newPhi);
        camera.position.z = radius * Math.sin(newPhi) * Math.cos(newTheta);
        camera.lookAt(0, 0, 0);
        
        previousMousePosition = { x: e.clientX, y: e.clientY };
    });
    
    renderer.domElement.addEventListener('mouseup', () => isDragging = false);
    renderer.domElement.addEventListener('wheel', (e) => {
        const delta = e.deltaY * 0.1;
        camera.position.multiplyScalar(1 + delta * 0.001);
    });
}

function startSimulation() {
    const rainfall = parseFloat(document.getElementById('rainfall').value);
    const duration = parseFloat(document.getElementById('duration').value);
    const drainage = parseFloat(document.getElementById('drainage').value) / 100;
    
    simulation = {
        rainfall,
        duration,
        drainage,
        day: 0,
        waterDepth: new Float32Array(width * height),
        soilSaturation: new Float32Array(width * height),
        rivers: detectRivers(),
        totalOutflow: 0
    };
    
    isRunning = true;
    waterMesh.visible = true;
    
    document.getElementById('startBtn').disabled = true;
    document.getElementById('pauseBtn').disabled = false;
}

function pauseSimulation() {
    isRunning = !isRunning;
    document.getElementById('pauseBtn').textContent = isRunning ? '‚è∏ Pause' : '‚ñ∂ Resume';
}

function resetSimulation() {
    isRunning = false;
    simulation = null;
    waterMesh.visible = false;
    
    document.getElementById('startBtn').disabled = false;
    document.getElementById('pauseBtn').disabled = true;
    document.getElementById('pauseBtn').textContent = '‚è∏ Pause';
    
    updateStats();
}

function updateSimulation(deltaTime) {
    if (!simulation || !isRunning) return;
    
    const speed = parseFloat(document.getElementById('speed').value);
    const daysPerFrame = deltaTime * speed / 1000; // 1 second = 1 day at 1x speed
    
    simulation.day += daysPerFrame;
    
    if (simulation.day >= simulation.duration) {
        isRunning = false;
        document.getElementById('pauseBtn').textContent = '‚úì Complete';
        return;
    }
    
    // Add rainfall
    const dailyRain = (simulation.rainfall / simulation.duration) * daysPerFrame;
    for (let i = 0; i < width * height; i++) {
        if (!simulation.rivers.has(i)) {
            simulation.waterDepth[i] += dailyRain;
        }
    }
    
    // Water flow simulation
    const newWaterDepth = new Float32Array(simulation.waterDepth);
    let totalOutflow = 0;
    
    for (let y = 0; y < height; y++) {
        for (let x = 0; x < width; x++) {
            const idx = y * width + x;
            const elev = elevations[idx];
            const waterLevel = elev + simulation.waterDepth[idx] * 0.001;
            
            // If in river, water exits system
            if (simulation.rivers.has(idx) && simulation.waterDepth[idx] > 0) {
                const outflow = simulation.waterDepth[idx] * 0.5 * daysPerFrame;
                newWaterDepth[idx] -= outflow;
                totalOutflow += outflow;
                continue;
            }
            
            // Flow to neighbors
            const neighbors = [[x-1,y], [x+1,y], [x,y-1], [x,y+1]];
            for (const [nx, ny] of neighbors) {
                if (nx >= 0 && nx < width && ny >= 0 && ny < height) {
                    const nIdx = ny * width + nx;
                    const nElev = elevations[nIdx];
                    const nWaterLevel = nElev + simulation.waterDepth[nIdx] * 0.001;
                    
                    if (waterLevel > nWaterLevel) {
                        const flowAmount = Math.min(
                            simulation.waterDepth[idx] * 0.1 * daysPerFrame,
                            (waterLevel - nWaterLevel) * 100
                        );
                        newWaterDepth[idx] -= flowAmount / 4;
                        newWaterDepth[nIdx] += flowAmount / 4;
                    }
                }
            }
            
            // Soil drainage
            const soilCapacity = 100;
            const availableSpace = Math.max(0, soilCapacity - simulation.soilSaturation[idx]);
            const drainageAmount = Math.min(
                newWaterDepth[idx] * simulation.drainage * daysPerFrame,
                availableSpace
            );
            newWaterDepth[idx] -= drainageAmount;
            simulation.soilSaturation[idx] += drainageAmount;
        }
    }
    
    simulation.waterDepth = newWaterDepth;
    simulation.totalOutflow += totalOutflow;
    
    updateWaterMesh();
    updateStats();
}

function updateWaterMesh() {
    if (!simulation) return;
    
    const positions = waterMesh.geometry.attributes.position.array;
    const colors = waterMesh.geometry.attributes.color.array;
    let hasVisibleWater = false;
    
    for (let i = 0; i < height; i++) {
        for (let j = 0; j < width; j++) {
            const idx = i * width + j;
            const vertIdx = idx * 3;
            const depthMM = simulation.waterDepth[idx];
            
            if (depthMM > 100) {
                hasVisibleWater = true;
                const waterHeight = depthMM * terrainScale * 0.001;
                positions[vertIdx + 2] = (elevations[idx] - 500) * terrainScale + waterHeight;
                
                // Color gradient
                const t = Math.min((depthMM - 100) / 900, 1);
                colors[vertIdx] = (100 + (150 - 100) * t) / 255;
                colors[vertIdx + 1] = (200 - (200 - 50) * t) / 255;
                colors[vertIdx + 2] = (255 - (255 - 200) * t) / 255;
            } else {
                positions[vertIdx + 2] = (elevations[idx] - 500) * terrainScale;
                colors[vertIdx] = 0;
                colors[vertIdx + 1] = 0;
                colors[vertIdx + 2] = 0;
            }
        }
    }
    
    waterMesh.geometry.attributes.position.needsUpdate = true;
    waterMesh.geometry.attributes.color.needsUpdate = true;
    waterMesh.geometry.computeVertexNormals();
    waterMesh.visible = hasVisibleWater;
}

function updateStats() {
    if (!simulation) {
        document.getElementById('statDay').textContent = '0 / 0';
        document.getElementById('statWater').textContent = '0 ML';
        document.getElementById('statDepth').textContent = '0 mm';
        document.getElementById('statOutflow').textContent = '0 ML';
        document.getElementById('statSat').textContent = '0%';
        return;
    }
    
    let totalWater = 0;
    let maxDepth = 0;
    let avgSat = 0;
    
    for (let i = 0; i < width * height; i++) {
        totalWater += simulation.waterDepth[i];
        maxDepth = Math.max(maxDepth, simulation.waterDepth[i]);
        avgSat += simulation.soilSaturation[i];
    }
    
    const areaPerCell = 0.01; // ~100m¬≤  per cell for this terrain
    const totalML = (totalWater / 1000) * areaPerCell * (width * height) / 1000;
    const outflowML = (simulation.totalOutflow / 1000) * areaPerCell * (width * height) / 1000;
    avgSat = avgSat / (width * height);
    
    document.getElementById('statDay').textContent = `${Math.floor(simulation.day)} / ${simulation.duration}`;
    document.getElementById('statWater').textContent = `${totalML.toFixed(1)} ML`;
    document.getElementById('statDepth').textContent = `${maxDepth.toFixed(0)} mm`;
    document.getElementById('statOutflow').textContent = `${outflowML.toFixed(1)} ML`;
    document.getElementById('statSat').textContent = `${avgSat.toFixed(0)}%`;
}

let lastTime = performance.now();
function animate() {
    requestAnimationFrame(animate);
    
    const currentTime = performance.now();
    const deltaTime = currentTime - lastTime;
    lastTime = currentTime;
    
    updateSimulation(deltaTime);
    renderer.render(scene, camera);
}

function onWindowResize() {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
}
    </script>
</body>
</html>
